(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{666:function(e,t,n){"use strict";var o=n(699);n.o(o,"CircleDrawer")&&n.d(t,"CircleDrawer",(function(){return o.CircleDrawer})),n.o(o,"CircleHover")&&n.d(t,"CircleHover",(function(){return o.CircleHover})),n.o(o,"CircleViewer")&&n.d(t,"CircleViewer",(function(){return o.CircleViewer})),n.o(o,"ContourDrawer")&&n.d(t,"ContourDrawer",(function(){return o.ContourDrawer})),n.o(o,"ContourHover")&&n.d(t,"ContourHover",(function(){return o.ContourHover})),n.o(o,"ContourViewer")&&n.d(t,"ContourViewer",(function(){return o.ContourViewer})),n.o(o,"CornerstoneFileSingleImage")&&n.d(t,"CornerstoneFileSingleImage",(function(){return o.CornerstoneFileSingleImage})),n.o(o,"CornerstoneSeriesImage")&&n.d(t,"CornerstoneSeriesImage",(function(){return o.CornerstoneSeriesImage})),n.o(o,"CornerstoneSingleImage")&&n.d(t,"CornerstoneSingleImage",(function(){return o.CornerstoneSingleImage})),n.o(o,"CornerstoneStaticSeriesImage")&&n.d(t,"CornerstoneStaticSeriesImage",(function(){return o.CornerstoneStaticSeriesImage})),n.o(o,"CornerstoneViewer")&&n.d(t,"CornerstoneViewer",(function(){return o.CornerstoneViewer})),n.o(o,"DCMImage")&&n.d(t,"DCMImage",(function(){return o.DCMImage})),n.o(o,"HeatmapViewer")&&n.d(t,"HeatmapViewer",(function(){return o.HeatmapViewer})),n.o(o,"ImageStoreProvider")&&n.d(t,"ImageStoreProvider",(function(){return o.ImageStoreProvider})),n.o(o,"InsightViewer")&&n.d(t,"InsightViewer",(function(){return o.InsightViewer})),n.o(o,"InsightViewerContainer")&&n.d(t,"InsightViewerContainer",(function(){return o.InsightViewerContainer})),n.o(o,"InsightViewerTestController")&&n.d(t,"InsightViewerTestController",(function(){return o.InsightViewerTestController})),n.o(o,"LeftBottomHolder")&&n.d(t,"LeftBottomHolder",(function(){return o.LeftBottomHolder})),n.o(o,"LeftTopHolder")&&n.d(t,"LeftTopHolder",(function(){return o.LeftTopHolder})),n.o(o,"PointViewer")&&n.d(t,"PointViewer",(function(){return o.PointViewer})),n.o(o,"ProgressViewer")&&n.d(t,"ProgressViewer",(function(){return o.ProgressViewer})),n.o(o,"RightBottomHolder")&&n.d(t,"RightBottomHolder",(function(){return o.RightBottomHolder})),n.o(o,"RightTopHolder")&&n.d(t,"RightTopHolder",(function(){return o.RightTopHolder})),n.o(o,"StrokeText")&&n.d(t,"StrokeText",(function(){return o.StrokeText})),n.o(o,"adjust")&&n.d(t,"adjust",(function(){return o.adjust})),n.o(o,"blockStyle")&&n.d(t,"blockStyle",(function(){return o.blockStyle})),n.o(o,"fetchBuffer")&&n.d(t,"fetchBuffer",(function(){return o.fetchBuffer})),n.o(o,"fileToBuffer")&&n.d(t,"fileToBuffer",(function(){return o.fileToBuffer})),n.o(o,"installWADOImageLoader")&&n.d(t,"installWADOImageLoader",(function(){return o.installWADOImageLoader})),n.o(o,"mapNpyBufferToImages")&&n.d(t,"mapNpyBufferToImages",(function(){return o.mapNpyBufferToImages})),n.o(o,"pan")&&n.d(t,"pan",(function(){return o.pan})),n.o(o,"unloadImage")&&n.d(t,"unloadImage",(function(){return o.unloadImage})),n.o(o,"useContour")&&n.d(t,"useContour",(function(){return o.useContour})),n.o(o,"useImageLoadedTime")&&n.d(t,"useImageLoadedTime",(function(){return o.useImageLoadedTime})),n.o(o,"useImageProgress")&&n.d(t,"useImageProgress",(function(){return o.useImageProgress})),n.o(o,"useImageStore")&&n.d(t,"useImageStore",(function(){return o.useImageStore})),n.o(o,"useInsightViewerSync")&&n.d(t,"useInsightViewerSync",(function(){return o.useInsightViewerSync})),n.o(o,"useSeriesImagePosition")&&n.d(t,"useSeriesImagePosition",(function(){return o.useSeriesImagePosition})),n.o(o,"useSeriesImageScroll")&&n.d(t,"useSeriesImageScroll",(function(){return o.useSeriesImageScroll})),n.o(o,"useViewportMirroring")&&n.d(t,"useViewportMirroring",(function(){return o.useViewportMirroring})),n.o(o,"zoom")&&n.d(t,"zoom",(function(){return o.zoom}));var r=n(700);n.d(t,"installWADOImageLoader",(function(){return r.a}));n(701);var i=n(702);n.d(t,"unloadImage",(function(){return i.a}));var s=n(703);n.d(t,"InsightViewer",(function(){return s.a}));var a=n(707);n.d(t,"ContourViewer",(function(){return a.a}));var c=n(708);n.d(t,"ContourDrawer",(function(){return c.a}));var u=n(711);n.d(t,"ContourHover",(function(){return u.a}));var h=n(744);n.d(t,"HeatmapViewer",(function(){return h.a}));var l=n(712);n.d(t,"InsightViewerContainer",(function(){return l.a})),n.d(t,"LeftBottomHolder",(function(){return l.b})),n.d(t,"LeftTopHolder",(function(){return l.c})),n.d(t,"RightBottomHolder",(function(){return l.d})),n.d(t,"RightTopHolder",(function(){return l.e}));var d=n(713);n.d(t,"ProgressViewer",(function(){return d.a}));var p=n(747);n.d(t,"PointViewer",(function(){return p.a}));var m=n(714);n.d(t,"CircleViewer",(function(){return m.a}));var v=n(715);n.d(t,"CircleDrawer",(function(){return v.a}));var g=n(717);n.d(t,"CircleHover",(function(){return g.a}));var f=n(718);n.d(t,"DCMImage",(function(){return f.a}));n(719);var w=n(720);n.d(t,"InsightViewerTestController",(function(){return w.a}));var E=n(721);n.d(t,"StrokeText",(function(){return E.a}));var b=n(722);n.d(t,"CornerstoneViewer",(function(){return b.a}));var I=n(723);n.d(t,"adjust",(function(){return I.a}));var y=n(724);n.d(t,"pan",(function(){return y.a}));var x=n(725);n.d(t,"zoom",(function(){return x.a}));var T=n(726);n.d(t,"useSeriesImagePosition",(function(){return T.a}));var D=n(727);n.d(t,"useSeriesImageScroll",(function(){return D.a}));var M=n(679);n.d(t,"useImageProgress",(function(){return M.a}));var S=n(728);n.d(t,"useInsightViewerSync",(function(){return S.a}));var C=n(729);n.d(t,"useContour",(function(){return C.a}));var L=n(731);n.d(t,"useViewportMirroring",(function(){return L.a}));var j=n(732);n.d(t,"useImageLoadedTime",(function(){return j.a}));var P=n(733);n.d(t,"ImageStoreProvider",(function(){return P.a})),n.d(t,"useImageStore",(function(){return P.b}));n(677);var V=n(680);n.d(t,"CornerstoneSingleImage",(function(){return V.a}));var k=n(735);n.d(t,"CornerstoneSeriesImage",(function(){return k.a}));n(676),n(736);var R=n(737);n.d(t,"fetchBuffer",(function(){return R.a}));var _=n(738);n.d(t,"fileToBuffer",(function(){return _.a}));var O=n(739);n.d(t,"CornerstoneFileSingleImage",(function(){return O.a}));var A=n(740);n.d(t,"CornerstoneStaticSeriesImage",(function(){return A.a}));var W=n(746);n.d(t,"mapNpyBufferToImages",(function(){return W.a}));n(741);var F=n(681);n.d(t,"blockStyle",(function(){return F.a}));n(742),n(671)},671:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o=n(0),r=n.n(o);const i=Object(o.createContext)({contentWindow:window});function s({stateRef:e}){return r.a.createElement(i.Consumer,null,t=>{e(t)})}},672:function(e,t,n){"use strict";function o(){try{return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0}catch(e){return console.error(e),!1}}n.d(t,"a",(function(){return o}))},675:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return u}));var o=n(0),r=n.n(o);function i(e){let t,n,o;const r=Math.max(Math.min(e,1),0);return r<.25?(t=0,n=4*r,o=1):r<.5?(t=0,n=1,o=1+4*(.25-r)):r<.75?(t=4*(r-.5),n=1,o=0):(t=1,n=1+4*(.75-r),o=0),[255*t<<0,255*n<<0,255*o<<0]}function s({stop:e,threshold:t}){const n=function({stop:e,threshold:t}){return e<t?0:.75*(e-t)/(1-t)}({stop:e,threshold:t});if(n<=0)return[0,0,0,0];const[o,r,s]=i(e);return[o,r,s,n]}function a({width:e,height:t,threshold:n}){return Object(o.useMemo)(()=>{const o=document.createElement("canvas");if(!o)return null;const r=window.devicePixelRatio,i=e*r,a=t*r;o.setAttribute("width",i.toString()),o.setAttribute("height",a.toString());const c=o.getContext("2d");if(!c)return null;let u=i+1;for(;--u>=0;)c.beginPath(),c.fillStyle=`rgba(${s({stop:u/i,threshold:n})})`,c.fillRect(u,0,1,a),c.closePath();return o.toDataURL()},[n,e,t])}function c({threshold:e=0,width:t,height:n,...o}){const i=a({width:t,height:n,threshold:e});return i?r.a.createElement("image",Object.assign({},o,{xlinkHref:i,width:t,height:n})):null}function u(e,t){const n=e[0].length,o=e.length,r=document.createElement("canvas").getContext("2d").createImageData(n,o),s=r.data;let a=-1;for(;++a<o;){let o=-1;for(;++o<n;){const r=4*(a*n+o),c=e[a][o];if(c<t)s[r]=0,s[r+1]=0,s[r+2]=0,s[r+3]=0;else{const e=(c-t)/(1-t),[n,o,a]=i(e);s[r]=n,s[r+1]=o,s[r+2]=a,s[r+3]=196*e<<0}}}return r}},676:function(e,t,n){"use strict";async function o(e){return new Promise(t=>{setTimeout(t,e)})}n.d(t,"a",(function(){return r}));class r{constructor(e={}){this.options=e,this.loadImage=({imageId:e,options:t})=>"number"===typeof this.options.timeout?Promise.race([cornerstone.loadImage(e,t),o(this.options.timeout).then(()=>{throw new Error("TIMEOUT")})]):cornerstone.loadImage(e,t)}}},677:function(e,t,n){"use strict";function o(e){const t=e.detail;if(t&&"string"===typeof t.url&&"string"===typeof t.imageId&&"number"===typeof t.loaded&&"number"===typeof t.total&&"number"===typeof t.percentComplete)return t}n.d(t,"a",(function(){return o}))},679:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n(0);function r(e){const[t,n]=Object(o.useState)(null);return Object(o.useEffect)(()=>{if(e){const t=e.progress.subscribe(e=>{n(e<1?e:null)});return()=>{t.unsubscribe()}}n(null)},[e]),t}},680:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var o=n(659),r=n(676),i=n(677),s=n(734);const a=new r.a;class c{constructor(e,t={}){this.imageId=e,this.options=t,this._imageSubject=void 0,this._progressSubject=void 0,this._cancel=[],this._loader=void 0,this._destoyed=!1,this.destroy=()=>{this.options&&"function"===typeof this.options.unload&&this.options.unload(this.imageId),cornerstone.events.removeEventListener("cornerstoneimageloadprogress",this.onProgress),this._cancel.forEach(e=>e()),this._destoyed=!0},this.onProgress=e=>{const t=Object(i.a)(e);t&&t.imageId===this.imageId&&this._progressSubject.next(Math.min(t.loaded/t.total,.99))},this.loadImage=async e=>{try{const t=await this._loader.loadImage({imageId:e,options:{loader:Object(s.a)(e=>this._cancel.push(e))}});cornerstone.events.removeEventListener("cornerstoneimageloadprogress",this.onProgress),this._destoyed||(this._imageSubject.next(t),this._progressSubject.next(1))}catch(t){this._destoyed||(console.warn(`It will retry loadImage(${e}):`,t),this.loadImage(e))}},this._imageSubject=new o.a(null),this._progressSubject=new o.a(0),this._loader=t.loader||a,cornerstone.events.addEventListener("cornerstoneimageloadprogress",this.onProgress),this.loadImage(e)}get image(){return this._imageSubject.asObservable()}get progress(){return this._progressSubject.asObservable()}}},681:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var o=n(36);const r=o.c`
  --contour-viewer-color: #ffffff;
  --contour-viewer-focused-color: rgb(255, 194, 17);
  --contour-viewer-stroke-width: 3px;
  --contour-viewer-focused-stroke-width: 6px;
  --contour-viewer-fill-color: rgba(0, 0, 0, 0.2);
  --contour-viewer-focused-fill-color: rgba(0, 0, 0, 0.4);

  --contour-drawer-color: rgb(255, 224, 0);
  --contour-drawer-stroke-width: 4px;
  --contour-drawer-fill-color: rgba(255, 224, 0, 0.2);

  --pin-color: #ffffff;
  --pin-focused-color: rgb(255, 194, 17);
`,i=o.c`
  :root {
    ${r};
  }
`},699:function(e,t){},700:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));let o=!1;function r(){o||(o=!0,cornerstoneWADOImageLoader.external.dicomParser=dicomParser,cornerstoneWADOImageLoader.external.cornerstone=cornerstone)}},701:function(e,t,n){"use strict"},702:function(e,t,n){"use strict";function o(e){function t(e){var t,n,o;/^wadouri:/.test(e)&&(null===(t=cornerstoneWADOImageLoader)||void 0===t||null===(n=t.wadouri)||void 0===n||null===(o=n.dataSetCacheManager)||void 0===o||o.unload(e))}Array.isArray(e)?e.forEach(e=>t(e)):"string"===typeof e&&t(e)}n.d(t,"a",(function(){return o}))},703:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var o=n(0),r=n.n(o),i=n(671),s=n(704),a=n(705),c=n(706);class u extends o.Component{constructor(...e){super(...e),this.element=void 0,this.currentViewport=null,this.currentImage=null,this.teardownPanInteraction=null,this.teardownAdjustInteraction=null,this.teardownZoomInteraction=null,this.imageSubscription=null,this.needImageInitialize=!0,this.contentWindow=window,this.elementRef=e=>{this.element=e,e&&(!0===this.props.pan&&this.startPanInteraction(this.props.pan),!0===this.props.adjust&&this.startAdjustInteraction(this.props.adjust),!0===this.props.zoom&&this.startZoomInteraction(this.props.zoom))},this.initImage=e=>{cornerstone.disable(this.element),cornerstone.enable(this.element,{renderer:"webgl"});let t=this.getDefaultViewport(e,this.element);if(!t)throw new Error("defaultViewport\ub294 null\uc77c \uc218 \uc5c6\ub2e4.");if(Array.isArray(this.props.defaultViewportTransforms)){const e=t.scale;for(const n of this.props.defaultViewportTransforms){const o=n({element:this.element,currentViewport:t,minScale:e,maxScale:3});t={...t,...o}}}t={...t,hflip:this.props.flip,invert:this.props.invert},cornerstone.displayImage(this.element,e,t),this.setImage(e),this.setViewport(t),this.startPanInteraction(this.props.pan),this.startAdjustInteraction(this.props.adjust),this.startZoomInteraction(this.props.zoom)},this.subscribeImage=e=>{if(e)if(e.voiLUT=void 0,this.needImageInitialize)this.needImageInitialize=!1,this.initImage(e);else{if(!this.currentViewport)throw new Error("\uc5b4\ub5a4 \uc0c1\ud669\uc778\uc9c0 \ud655\uc778 \ud544\uc694!!!");cornerstone.displayImage(this.element,e,this.currentViewport)}},this.onImageRenderered=e=>{const t=e.detail;t&&t.canvasContext&&t.element&&t.enabledElement&&t.image&&"number"===typeof t.renderTimeInMs&&t.viewport?(this.currentViewport=t.viewport,this.props.updateCornerstoneRenderData(t)):console.error("CornerstoneEventData\uc5d0 \uc5c6\ub294 \uc815\ubcf4\uac00 \uc788\ub2e4???",t)},this.startPanInteraction=e=>{this.teardownPanInteraction&&this.teardownPanInteraction();const t=e instanceof this.contentWindow.HTMLElement?e:!0===e?this.element:null;t&&(this.teardownPanInteraction=Object(a.a)({element:t,getCurrentViewport:()=>this.currentViewport,onMove:e=>this.updateCurrentViewport({translation:e}),onEnd:()=>{},contentWindow:this.contentWindow}))},this.startAdjustInteraction=e=>{this.teardownAdjustInteraction&&this.teardownAdjustInteraction();const t=e instanceof this.contentWindow.HTMLElement?e:!0===e?this.element:null;t&&(this.teardownAdjustInteraction=Object(s.a)({element:t,getCurrentViewport:()=>this.currentViewport,onMove:e=>this.updateCurrentViewport({voi:e}),onEnd:()=>{},contentWindow:this.contentWindow}))},this.startZoomInteraction=e=>{this.teardownZoomInteraction&&this.teardownZoomInteraction();const t=e instanceof this.contentWindow.HTMLElement?e:!0===e?this.element:null;t&&(this.teardownZoomInteraction=Object(c.a)({element:t,getMinMaxScale:()=>[this.getMinScale(),this.getMaxScale()],getCurrentViewport:()=>this.currentViewport,onZoom:e=>this.updateCurrentViewport(e),contentWindow:this.contentWindow}))},this.getElement=()=>this.element,this.getContentWindow=()=>this.contentWindow,this.getCurrentViewport=()=>this.currentViewport,this.getDefaultViewport=(e,t)=>e&&t?cornerstone.getDefaultViewportForImage(t,e):null,this.getMinScale=()=>{const e=this.getDefaultViewport(this.currentImage,this.element);if(!e)throw new Error("viewport\uac00 \uc815\uc0c1\uc801\uc73c\ub85c \uc640\uc57c\ub9cc \ud55c\ub2e4");return e.scale},this.getMaxScale=()=>3,this.updateViewport=e=>{this.currentViewport&&this.updateCurrentViewport(e)},this.getViewportTransformParams=()=>({element:this.element,minScale:this.getMinScale(),maxScale:this.getMaxScale(),currentViewport:this.currentViewport}),this.setCornerstoneImage=e=>{this.needImageInitialize=!0,this.setImage(null),this.imageSubscription&&(this.imageSubscription.unsubscribe(),this.imageSubscription=null),this.imageSubscription=e.image.subscribe(this.subscribeImage)},this.setImage=e=>{this.currentImage=e},this.setViewport=e=>{this.currentViewport=e,cornerstone.setViewport(this.element,this.currentViewport)},this.updateCurrentViewport=e=>{if(!this.currentViewport)throw new Error("viewport\uac00 \uc5c6\ub294 \uc0c1\ud0dc\uc5d0\uc11c \uc2e4\ud589\ub418\uba74 \uc548\ub41c\ub2e4");const t="function"===typeof e?e(this.currentViewport):e;this.currentViewport={...this.currentViewport,...t},cornerstone.setViewport(this.element,this.currentViewport)}}render(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(i.a,{stateRef:({contentWindow:e})=>this.contentWindow=e}),r.a.createElement("div",{ref:this.elementRef,style:{width:this.props.width,height:this.props.height}}))}componentDidMount(){this.element.addEventListener(cornerstone.EVENTS.IMAGE_RENDERED,this.onImageRenderered),this.setCornerstoneImage(this.props.image)}componentWillUnmount(){this.element.removeEventListener(cornerstone.EVENTS.IMAGE_RENDERED,this.onImageRenderered),cornerstone.disable(this.element),this.imageSubscription&&this.imageSubscription.unsubscribe(),this.teardownPanInteraction&&this.teardownPanInteraction(),this.teardownAdjustInteraction&&this.teardownAdjustInteraction(),this.teardownZoomInteraction&&this.teardownZoomInteraction()}componentDidUpdate(e){const{width:t,height:n,flip:o,invert:r,pan:i,adjust:s,zoom:a,resetTime:c,image:u}=this.props,h=this.getDefaultViewport(this.currentImage,this.element);if(e.pan!==i&&this.startPanInteraction(i),e.adjust!==s&&this.startAdjustInteraction(s),e.zoom!==a&&this.startZoomInteraction(a),h&&(e.resetTime!==c?this.updateCurrentViewport({...h,hflip:o,invert:h.invert?!r:r}):e.flip===o&&e.invert===r||this.updateCurrentViewport({hflip:o,invert:h.invert?!r:r})),(e.width!==t||e.height!==n)&&this.currentImage){cornerstone.resize(this.element);const e=cornerstone.getViewport(this.element);if(!e)throw new Error("getViewport() is returns not a Viewport");this.setViewport(e)}e.image!==u&&this.setCornerstoneImage(u)}}},704:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n(672);function r({element:e,getCurrentViewport:t,onMove:n,onEnd:r,contentWindow:i}){let s,a,c,u;function h(){e.addEventListener("mousedown",v),Object(o.a)()&&e.addEventListener("touchstart",d)}function l(){e.removeEventListener("mousedown",v),e.removeEventListener("touchstart",d)}function d(e){if(e.targetTouches.length>1)return i.removeEventListener("touchmove",p),i.removeEventListener("touchend",m),i.removeEventListener("touchcancel",m),void h();if(1!==e.targetTouches.length)return;e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault();const n=t();n&&(l(),s=e.targetTouches[0].pageX,a=e.targetTouches[0].pageY,c=n.voi.windowCenter,u=n.voi.windowWidth,i.addEventListener("touchmove",p),i.addEventListener("touchend",m),i.addEventListener("touchcancel",m))}function p(e){if(1!==e.targetTouches.length||1!==e.changedTouches.length)return i.removeEventListener("touchmove",p),i.removeEventListener("touchend",m),i.removeEventListener("touchcancel",m),void h();if(e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault(),!t())return;const o=e.targetTouches[0].pageX-s,r=e.targetTouches[0].pageY-a;n({windowWidth:Math.max(u+o,1),windowCenter:Math.max(c+r,1)})}function m(e){i.removeEventListener("touchmove",p),i.removeEventListener("touchend",m),i.removeEventListener("touchcancel",m),h(),r()}function v(n){if(0!==n.button)return;n.stopPropagation(),n.stopImmediatePropagation(),n.preventDefault();const o=t();o&&(l(),s=n.pageX,a=n.pageY,c=o.voi.windowCenter,u=o.voi.windowWidth,i.addEventListener("mousemove",g),i.addEventListener("mouseup",f),e.addEventListener("mouseleave",f))}function g(e){e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault();const t=e.pageX-s,o=e.pageY-a;n({windowWidth:Math.max(u+t,1),windowCenter:Math.max(c+o,1)})}function f(t){0===t.button&&(t.stopPropagation(),t.stopImmediatePropagation(),t.preventDefault(),i.removeEventListener("mousemove",g),i.removeEventListener("mouseup",f),e.removeEventListener("mouseleave",f),h(),r())}return h(),()=>{e.removeEventListener("mousedown",v),e.removeEventListener("touchstart",d),i.removeEventListener("mousemove",g),i.removeEventListener("mouseup",f),e.removeEventListener("mouseleave",f),i.removeEventListener("touchmove",p),i.removeEventListener("touchend",m),i.removeEventListener("touchcancel",m)}}},705:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n(672);function r({element:e,getCurrentViewport:t,onMove:n,onEnd:r,contentWindow:i}){let s,a,c,u;function h(){e.addEventListener("mousedown",v),Object(o.a)()&&e.addEventListener("touchstart",d)}function l(){e.removeEventListener("mousedown",v),e.removeEventListener("touchstart",d)}function d(e){if(e.targetTouches.length>1)return i.removeEventListener("touchmove",p),i.removeEventListener("touchend",m),i.removeEventListener("touchcancel",m),void h();if(1!==e.targetTouches.length)return;e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault();const n=t();n&&(l(),s=e.targetTouches[0].pageX,a=e.targetTouches[0].pageY,c=n.translation.x,u=n.translation.y,i.addEventListener("touchmove",p),i.addEventListener("touchend",m),i.addEventListener("touchcancel",m))}function p(e){if(1!==e.targetTouches.length||1!==e.changedTouches.length)return i.removeEventListener("touchmove",p),i.removeEventListener("touchend",m),i.removeEventListener("touchcancel",m),void h();e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault();const o=t();if(!o)return;const r=(e.targetTouches[0].pageX-s)/o.scale,l=(e.targetTouches[0].pageY-a)/o.scale;n({x:c+r,y:u+l})}function m(e){i.removeEventListener("touchmove",p),i.removeEventListener("touchend",m),i.removeEventListener("touchcancel",m),h(),r()}function v(n){if(0!==n.button)return;n.stopPropagation(),n.stopImmediatePropagation(),n.preventDefault();const o=t();o&&(l(),s=n.pageX,a=n.pageY,c=o.translation.x,u=o.translation.y,i.addEventListener("mousemove",g),i.addEventListener("mouseup",f),e.addEventListener("mouseleave",f))}function g(e){e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault();const o=t();if(!o)return;const r=(e.pageX-s)/o.scale,i=(e.pageY-a)/o.scale;n({x:c+r,y:u+i})}function f(t){0===t.button&&(t.stopPropagation(),t.stopImmediatePropagation(),t.preventDefault(),i.removeEventListener("mousemove",g),i.removeEventListener("mouseup",f),e.removeEventListener("mouseleave",f),h(),r())}return h(),()=>{e.removeEventListener("mousedown",v),i.removeEventListener("mousemove",g),i.removeEventListener("mouseup",f),e.removeEventListener("mouseleave",f),e.removeEventListener("touchstart",d),i.removeEventListener("touchmove",p),i.removeEventListener("touchend",m),i.removeEventListener("touchcancel",m)}}},706:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o=n(672),r=n(643),i=n(642);function s({element:e,getMinMaxScale:t,getCurrentViewport:n,onZoom:s,contentWindow:a}){function c(o){o.preventDefault(),o.stopPropagation(),o.stopImmediatePropagation();const[r,i]=t(),c=n();if(!c)return;const u=o.deltaY>0?1:-1,h=Math.max(r,Math.min(i,c.scale-.03*u));if(c.scale===h)return;const{top:l,left:d,width:p,height:m}=e.getBoundingClientRect(),v=o.pageX-a.scrollX-(d+p/2),g=o.pageY-a.scrollY-(l+m/2),f=(1-h/c.scale)*v,w=(1-h/c.scale)*g;s({translation:{x:c.translation.x+f/h,y:c.translation.y+w/h},scale:h})}let u,h,l,d;function p(t){if(2!==t.targetTouches.length)return;t.stopPropagation(),t.stopImmediatePropagation(),t.preventDefault();const o=n();if(!o)return;d=o.scale,l=o.translation,u=[{x:t.targetTouches[0].pageX,y:t.targetTouches[0].pageY},{x:t.targetTouches[1].pageX,y:t.targetTouches[1].pageY}];const r=Math.abs(u[0].x-u[1].x),i=Math.abs(u[0].y-u[1].y);h=Math.sqrt(Math.pow(r,2)+Math.pow(i,2)),e.removeEventListener("touchstart",p),e.addEventListener("touchmove",m),e.addEventListener("touchend",v),e.addEventListener("touchcancel",v)}function m(e){if(2!==e.targetTouches.length||2!==e.changedTouches.length)return;e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault();const t=[{x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY},{x:e.changedTouches[1].pageX,y:e.changedTouches[1].pageY}],n=Math.abs(t[0].x-t[1].x),o=Math.abs(t[0].y-t[1].y),r=Math.sqrt(Math.pow(n,2)+Math.pow(o,2)),i=d*(r/h),a=((t[0].x+t[1].x)/2-(u[0].x+u[1].x)/2)/i,c=((t[0].y+t[1].y)/2-(u[0].y+u[1].y)/2)/i;s({translation:{x:l.x+a,y:l.y+c},scale:i})}function v(o){const a=n();if(!a)return;const[c,u]=t();if(a.scale<c){const e=Object(i.a)(t=>{const n=Object(r.a)(t/500);t>500?(s({translation:a.translation,scale:c}),e.stop()):s({translation:a.translation,scale:a.scale+(c-a.scale)*n})})}else if(a.scale>u){const e=Object(i.a)(t=>{const n=Object(r.a)(t/500);t>500?(s({translation:a.translation,scale:u}),e.stop()):s({translation:a.translation,scale:a.scale+(u-a.scale)*n})})}e.removeEventListener("touchmove",m),e.removeEventListener("touchend",v),e.removeEventListener("touchcancel",v),e.addEventListener("touchstart",p)}return e.addEventListener("wheel",c),Object(o.a)()&&e.addEventListener("touchstart",p),()=>{e.removeEventListener("wheel",c),e.removeEventListener("touchstart",p),e.removeEventListener("touchmove",m),e.removeEventListener("touchend",v),e.removeEventListener("touchcancel",v)}}},707:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var o=n(603),r=n.n(o),i=n(0),s=n.n(i),a=n(36);class c extends i.Component{constructor(...e){super(...e),this.svgRef=Object(i.createRef)()}render(){const{cornerstoneRenderData:e,contours:t,focusedContour:n}=this.props;return s.a.createElement("svg",{ref:this.svgRef,className:this.props.className,style:this.props.style,width:this.props.width,height:this.props.height},t.length>0&&e&&e.element&&t.map(t=>{const o=function(e,t){return t.map(([t,n])=>{const o=cornerstone.pixelToCanvas(e,{x:t,y:n});return[o.x,o.y]})}(e.element,t.polygon),a=r()([o],1),c=t===n,u=t.dataAttrs||{};return s.a.createElement(i.Fragment,{key:"polygon"+t.id},!0===this.props.border&&s.a.createElement("polygon",Object.assign({},u,{"data-border":"border","data-id":t.id,"data-focused":c||void 0,points:o.map(([e,t])=>`${e},${t}`).join(" ")})),s.a.createElement("polygon",Object.assign({},u,{"data-id":t.id,"data-focused":c||void 0,points:o.map(([e,t])=>`${e},${t}`).join(" ")})),!0===this.props.border&&s.a.createElement("text",Object.assign({},u,{"data-border":"border","data-id":t.id,"data-focused":c||void 0,fontSize:14*Math.max(1,e.viewport.scale),x:a[0],y:a[1]}),t.label?"function"===typeof t.label?t.label(t):t.label:t.id),s.a.createElement("text",Object.assign({},u,{"data-id":t.id,"data-focused":c||void 0,fontSize:14*Math.max(1,e.viewport.scale),x:a[0],y:a[1]}),t.label?"function"===typeof t.label?t.label(t):t.label:t.id))}))}}c.defaultProps={border:!0};const u=Object(a.d)(c)`
  position: absolute;
  top: 0;
  left: 0;
  pointer-events: none;
  user-select: none;

  --color: #ffffff;
  --focused-color: rgb(255, 194, 17);
  --stroke-width: 3px;
  --focused-stroke-width: 6px;
  --fill-color: rgba(0, 0, 0, 0.2);
  --focused-fill-color: rgba(0, 0, 0, 0.4);

  > polygon {
    stroke-width: var(--contour-viewer-stroke-width, var(--stroke-width));
    stroke: var(--contour-viewer-color, var(--color));
    fill: var(--contour-viewer-fill-color, var(--fill-color));
    transition: stroke 120ms ease-out, stroke-width 120ms ease-out;

    &[data-focused] {
      stroke-width: var(--contour-viewer-focused-stroke-width, var(--focused-stroke-width));
      stroke: var(--contour-viewer-focused-color, var(--focused-color));
      fill: var(--contour-viewer-focused-fill-color, var(--focused-fill-color));
    }

    &[data-border] {
      stroke-width: calc(var(--contour-viewer-stroke-width, var(--stroke-width)) + 2px);
      stroke: #000000;
      fill: transparent;

      &[data-focused] {
        stroke-width: calc(var(--contour-viewer-focused-stroke-width, var(--focused-stroke-width)) + 2px);
        stroke: #000000;
      }
    }
  }

  > text {
    fill: var(--contour-viewer-color, var(--color));
    font-family: proximanova, noto_sans, sans-serif;
    font-weight: 600;
    text-anchor: middle;
    dominant-baseline: central;
    transition: fill 120ms ease-out, stroke-width 120ms ease-out;

    &[data-focused] {
      fill: var(--contour-viewer-focused-color, var(--focused-color));
    }

    &[data-border] {
      stroke-width: 4px;
      stroke: #000000;
      fill: transparent;
    }
  }
`},708:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var o=n(672),r=n(0),i=n.n(r),s=n(36),a=n(671),c=n(709),u=n(710);function h(e,t){return t.map(([t,n])=>{const o=cornerstone.pixelToCanvas(e,{x:t,y:n});return o.x+","+o.y}).join(" ")}class l extends r.Component{constructor(e){super(e),this.svg=null,this.element=null,this.focused=null,this.preventClickEvent=!1,this.startX=0,this.startY=0,this.contentWindow=window,this.svgRef=e=>{e&&this.svg&&this.element&&(this.deactivateInitialEvents(),this.deactivateMouseDrawEvents(),this.canActivate(this.props)&&(this.svg=e,this.element=this.getElement(this.props),this.activateInitialEvents())),this.svg=e},this.getElement=({draw:e})=>e instanceof this.contentWindow.HTMLElement?e:this.svg,this.canActivate=({draw:e})=>e instanceof this.contentWindow.HTMLElement||!0===e,this.activateInitialEvents=()=>{this.element&&("touch-only"!==this.props.device&&"stylus-only"!==this.props.device&&(this.element.addEventListener("mousemove",this.onMouseMoveToFindFocus),this.element.addEventListener("mousedown",this.onMouseDownToStartDraw)),Object(o.a)()&&"mouse-only"!==this.props.device&&this.element.addEventListener("touchstart",this.onTouchStartToStartDraw),this.element.addEventListener("click",this.onMouseClickToRemove))},this.deactivateInitialEvents=()=>{this.element&&(this.element.removeEventListener("mousemove",this.onMouseMoveToFindFocus),this.element.removeEventListener("mousedown",this.onMouseDownToStartDraw),this.element.removeEventListener("touchstart",this.onTouchStartToStartDraw),this.element.removeEventListener("click",this.onMouseClickToRemove))},this.onMouseMoveToFindFocus=e=>{e.stopPropagation(),this.findFocus(e.pageX,e.pageY)},this.findFocus=(e,t)=>{if(!this.props.contours||0===this.props.contours.length||!this.props.cornerstoneRenderData)return;const n=this.props.cornerstoneRenderData.element,{x:o,y:r}=cornerstone.pageToPixel(n,e,t);this.focused=Object(c.a)(this.props.contours,[o,r]),this.props.onFocus(this.focused)},this.onMouseClickToRemove=e=>{e.stopPropagation(),this.focused&&!this.preventClickEvent&&this.props.onRemove(this.focused)},this.onTouchStartToStartDraw=e=>{if(("stylus-only"===this.props.device||"mouse-and-stylus"===this.props.device)&&"stylus"!==e.targetTouches[0].touchType)return;if(e.targetTouches.length>1)return this.deactivateTouchDrawEvents(),this.activateInitialEvents(),void this.setState(e=>({...e,polygon:[]}));if(1!==e.targetTouches.length)return;if(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),!this.props.cornerstoneRenderData)throw new Error("cornerstoneRenderEventData\ub97c \ucc3e\uc744 \uc218 \uc5c6\ub2e4!");this.preventClickEvent=!1,this.startX=e.targetTouches[0].pageX,this.startY=e.targetTouches[0].pageY,this.deactivateInitialEvents(),this.activateTouchDrawEvents();const t=this.props.cornerstoneRenderData.element,{x:n,y:o}=cornerstone.pageToPixel(t,e.targetTouches[0].pageX,e.targetTouches[0].pageY);this.setState(e=>({...e,polygon:[[n,o]]}))},this.activateTouchDrawEvents=()=>{this.element&&(this.element.addEventListener("touchmove",this.onTouchMoveToDraw),this.element.addEventListener("touchend",this.onTouchEndToEndDraw),this.element.addEventListener("touchcancel",this.onTouchEndToEndDraw),window.addEventListener("keydown",this.onKeyDownToCancelTouchDraw))},this.deactivateTouchDrawEvents=()=>{this.element&&(this.element.removeEventListener("touchmove",this.onTouchMoveToDraw),this.element.removeEventListener("touchend",this.onTouchEndToEndDraw),this.element.removeEventListener("touchcancel",this.onTouchEndToEndDraw),window.removeEventListener("keydown",this.onKeyDownToCancelTouchDraw))},this.onTouchMoveToDraw=e=>{if(1!==e.targetTouches.length||1!==e.changedTouches.length)return this.deactivateTouchDrawEvents(),this.activateInitialEvents(),void this.setState(e=>({...e,polygon:[]}));if(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),!this.props.cornerstoneRenderData)throw new Error("cornerstoneRenderEventData\ub97c \ucc3e\uc744 \uc218 \uc5c6\ub2e4!");!this.preventClickEvent&&Math.max(Math.abs(e.targetTouches[0].pageX-this.startX),Math.abs(e.targetTouches[0].pageY-this.startY))>20&&(this.preventClickEvent=!0);const t=this.props.cornerstoneRenderData.element,{x:n,y:o}=cornerstone.pageToPixel(t,e.targetTouches[0].pageX,e.targetTouches[0].pageY);this.setState(e=>({...e,polygon:[...e.polygon,[n,o]]}))},this.onTouchEndToEndDraw=e=>{e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),this.deactivateTouchDrawEvents(),this.activateInitialEvents(),this.props.onAdd(this.state.polygon,e),this.setState(e=>({...e,polygon:[]}))},this.onKeyDownToCancelTouchDraw=e=>{"escape"===e.key.toLowerCase()&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),this.cancelTouchDraw())},this.cancelTouchDraw=()=>{this.deactivateTouchDrawEvents(),this.activateInitialEvents(),this.setState(e=>({...e,polygon:[]}))},this.onMouseDownToStartDraw=e=>{if(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),!this.props.cornerstoneRenderData)throw new Error("cornerstoneRenderEventData\ub97c \ucc3e\uc744 \uc218 \uc5c6\ub2e4!");this.preventClickEvent=!1,this.startX=e.pageX,this.startY=e.pageY,this.deactivateInitialEvents(),this.activateMouseDrawEvents();const t=this.props.cornerstoneRenderData.element,{x:n,y:o}=cornerstone.pageToPixel(t,e.pageX,e.pageY);this.setState(e=>({...e,polygon:[[n,o]]}))},this.activateMouseDrawEvents=()=>{this.element&&(this.element.addEventListener("mousemove",this.onMouseMoveToDraw),this.element.addEventListener("mouseup",this.onMouseUpToEndDraw),this.element.addEventListener("mouseleave",this.onMouseLeaveToCancelDraw),window.addEventListener("keydown",this.onKeyDownToCancelMouseDraw))},this.deactivateMouseDrawEvents=()=>{this.element&&(this.element.removeEventListener("mousemove",this.onMouseMoveToDraw),this.element.removeEventListener("mouseup",this.onMouseUpToEndDraw),this.element.removeEventListener("mouseleave",this.onMouseLeaveToCancelDraw),window.removeEventListener("keydown",this.onKeyDownToCancelMouseDraw))},this.onMouseMoveToDraw=e=>{if(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),!this.props.cornerstoneRenderData)throw new Error("cornerstoneRenderEventData\ub97c \ucc3e\uc744 \uc218 \uc5c6\ub2e4!");!this.preventClickEvent&&Math.max(Math.abs(e.pageX-this.startX),Math.abs(e.pageY-this.startY))>20&&(this.preventClickEvent=!0);const t=this.props.cornerstoneRenderData.element,{x:n,y:o}=cornerstone.pageToPixel(t,e.pageX,e.pageY);this.setState(e=>({...e,polygon:[...e.polygon,[n,o]]}))},this.onMouseUpToEndDraw=e=>{e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),this.deactivateMouseDrawEvents(),this.activateInitialEvents(),this.props.onAdd(this.state.polygon,e),this.setState(e=>({...e,polygon:[]}))},this.onMouseLeaveToCancelDraw=e=>{e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),this.cancelMouseDraw()},this.onKeyDownToCancelMouseDraw=e=>{"escape"===e.key.toLowerCase()&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),this.cancelMouseDraw())},this.cancelMouseDraw=()=>{this.deactivateMouseDrawEvents(),this.activateInitialEvents(),this.setState(e=>({...e,polygon:[]}))},this.state={polygon:[]}}render(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(a.a,{stateRef:({contentWindow:e})=>this.contentWindow=e}),i.a.createElement("svg",{ref:this.svgRef,role:"figure",width:this.props.width,height:this.props.height,className:this.props.className,style:this.props.style},this.props.cornerstoneRenderData&&this.state.polygon&&this.state.polygon.length>0&&i.a.createElement(i.a.Fragment,null,i.a.createElement("polyline",{points:h(this.props.cornerstoneRenderData.element,this.state.polygon)}),!1!==this.props.animateStroke&&i.a.createElement("polyline",{points:h(this.props.cornerstoneRenderData.element,this.state.polygon),"data-highlight":"highlight"}))))}componentDidMount(){if(!this.svg)throw new Error("<svg> is not initialized");this.canActivate(this.props)&&(this.element=this.getElement(this.props),this.activateInitialEvents())}componentDidUpdate(e){e.draw!==this.props.draw&&(this.element&&(this.deactivateInitialEvents(),this.deactivateMouseDrawEvents()),this.canActivate(this.props)&&(this.element=this.getElement(this.props),this.activateInitialEvents()))}componentWillUnmount(){this.element&&(this.deactivateInitialEvents(),this.deactivateMouseDrawEvents())}}l.defaultProps={device:"all"};const d=Object(s.d)(l)`
  position: absolute;
  top: 0;
  left: 0;

  --color: rgb(255, 224, 0);
  --stroke-width: 4px;
  --fill-color: rgba(255, 224, 0, 0.2);

  > polyline:first-child {
    stroke: var(--contour-drawer-color, var(--color));
    stroke-width: var(--contour-drawer-stroke-width, var(--stroke-width));
    fill: var(--contour-drawer-fill-color, var(--fill-color));
  }

  > polyline[data-highlight] {
    stroke: #ffffff;
    stroke-width: var(--contour-drawer-stroke-width, var(--stroke-width));
    fill: transparent;
    ${u.a}
  }
`},709:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var o=n(604),r=n.n(o);function i(e,t){return e.find(e=>r()(t,e.polygon))||null}},710:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var o=n(36);const r=o.e`
  to {
    stroke-dashoffset: 0;
  }
`,i=o.c`
  stroke-dasharray: 10, 10;
  stroke-dashoffset: 1000;
  animation: ${r} 10s linear infinite;
`},711:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var o=n(0),r=n.n(o),i=n(36),s=n(671),a=n(709);class c extends o.Component{constructor(e){super(e),this.svg=null,this.element=null,this.focused=null,this.contentWindow=window,this.svgRef=e=>{e&&this.svg&&this.element&&(this.deactivateInitialEvents(),this.canActivate(this.props)&&(this.svg=e,this.element=this.getElement(this.props),this.activateInitialEvents())),this.svg=e},this.getElement=({hover:e})=>e instanceof this.contentWindow.HTMLElement?e:this.svg,this.canActivate=({hover:e})=>e instanceof this.contentWindow.HTMLElement||!0===e,this.activateInitialEvents=()=>{this.element&&this.element.addEventListener("mousemove",this.onMouseMoveToFindFocus)},this.deactivateInitialEvents=()=>{this.element&&this.element.removeEventListener("mousemove",this.onMouseMoveToFindFocus)},this.onMouseMoveToFindFocus=e=>{this.findFocus(e.pageX,e.pageY)},this.findFocus=(e,t)=>{if(!this.props.contours||0===this.props.contours.length||!this.props.cornerstoneRenderData)return;const n=this.props.cornerstoneRenderData.element,{x:o,y:r}=cornerstone.pageToPixel(n,e,t);this.focused=Object(a.a)(this.props.contours,[o,r]),this.props.onFocus(this.focused)},this.state={polygon:[]}}render(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,{stateRef:({contentWindow:e})=>this.contentWindow=e}),r.a.createElement("svg",{ref:this.svgRef,role:"figure",width:this.props.width,height:this.props.height,className:this.props.className}))}componentDidMount(){if(!this.svg)throw new Error("<svg> is not initialized");this.canActivate(this.props)&&(this.element=this.getElement(this.props),this.activateInitialEvents())}componentDidUpdate(e){e.hover!==this.props.hover&&(this.element&&this.deactivateInitialEvents(),this.canActivate(this.props)&&(this.element=this.getElement(this.props),this.activateInitialEvents()))}componentWillUnmount(){this.element&&this.deactivateInitialEvents()}}const u=Object(i.d)(c)`
  position: absolute;
  top: 0;
  left: 0;
`},712:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return s})),n.d(t,"e",(function(){return a})),n.d(t,"d",(function(){return c}));var o=n(36);const r=o.d.div`
  background-color: #000000;
  position: relative;
  width: ${({width:e})=>e}px;
  height: ${({height:e})=>e}px;
`,i=o.d.div`
  position: absolute;
  left: 5px;
  top: 5px;
`,s=o.d.div`
  position: absolute;
  left: 5px;
  bottom: 5px;
`,a=o.d.div`
  position: absolute;
  right: 5px;
  top: 5px;
`,c=o.d.div`
  position: absolute;
  right: 5px;
  bottom: 5px;
`},713:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var o=n(644),r=n(0),i=n.n(r),s=n(36),a=n(679);let c=0;function u({width:e,height:t,inProgress:n,image:s}){const u=Object(r.useMemo)(()=>++c,[]),d=Object(a.a)(s),{setProgress:p,unsetProgress:m}=Object(r.useContext)(h);return Object(r.useEffect)(()=>{!0===n||"number"===typeof d?p(u,d||0):m(u)},[u,d,n,p,m]),i.a.createElement(i.a.Fragment,null,(!0===n||"number"===typeof d)&&i.a.createElement(l,{style:{width:e,height:t,backgroundColor:"rgba(0, 0, 0, 0.3)"}},i.a.createElement(o.a,{size:120})),"number"===typeof d&&i.a.createElement(l,{style:{width:e,height:t}},i.a.createElement(o.a,{size:100,variant:"static",value:100*d})))}const h=Object(r.createContext)({inProgress:!1,setProgress:()=>{},unsetProgress:()=>{}});const l=s.d.div`
  position: absolute;
  top: 0;
  left: 0;
  display: flex;
  align-items: center;
  justify-content: center;
`},714:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var o=n(0),r=n.n(o),i=n(36);class s extends o.Component{constructor(...e){super(...e),this.svgRef=Object(o.createRef)()}render(){const{cornerstoneRenderData:e,contours:t,focusedContour:n}=this.props;return r.a.createElement("svg",{ref:this.svgRef,className:this.props.className,style:this.props.style,width:this.props.width,height:this.props.height},t.length>0&&e&&e.element&&t.map(t=>{const{cx:i,cy:s,r:a}=function(e,t){const{x:n,y:o}=cornerstone.pixelToCanvas(e,{x:t[0][0],y:t[0][1]}),{x:r,y:i}=cornerstone.pixelToCanvas(e,{x:t[1][0],y:t[1][1]});return{cx:n,cy:o,r:Math.sqrt(Math.pow(Math.abs(r-n),2)+Math.pow(Math.abs(i-o),2))}}(e.element,t.polygon),c=t===n,u=t.dataAttrs||{};return r.a.createElement(o.Fragment,{key:"circle"+t.id},!0===this.props.border&&r.a.createElement("circle",Object.assign({},u,{"data-border":"border","data-id":t.id,"data-focused":c||void 0,cx:i,cy:s,r:a})),r.a.createElement("circle",Object.assign({},u,{"data-id":t.id,"data-focused":c||void 0,cx:i,cy:s,r:a})),!0===this.props.border&&r.a.createElement("text",Object.assign({},u,{"data-border":"border","data-id":t.id,"data-focused":c||void 0,fontSize:14*Math.max(1,e.viewport.scale),x:i,y:s}),t.label?"function"===typeof t.label?t.label(t):t.label:t.id),r.a.createElement("text",Object.assign({},u,{"data-id":t.id,"data-focused":c||void 0,fontSize:14*Math.max(1,e.viewport.scale),x:i,y:s}),t.label?"function"===typeof t.label?t.label(t):t.label:t.id))}))}}s.defaultProps={border:!0};const a=Object(i.d)(s)`
  position: absolute;
  top: 0;
  left: 0;
  pointer-events: none;
  user-select: none;

  --color: #ffffff;
  --focused-color: rgb(255, 194, 17);
  --stroke-width: 3px;
  --focused-stroke-width: 6px;
  --fill-color: rgba(0, 0, 0, 0.2);
  --focused-fill-color: rgba(0, 0, 0, 0.4);

  > circle {
    stroke-width: var(--contour-viewer-stroke-width, var(--stroke-width));
    stroke: var(--contour-viewer-color, var(--color));
    fill: var(--contour-viewer-fill-color, var(--fill-color));
    transition: stroke 120ms ease-out, stroke-width 120ms ease-out;

    &[data-focused] {
      stroke-width: var(--contour-viewer-focused-stroke-width, var(--focused-stroke-width));
      stroke: var(--contour-viewer-focused-color, var(--focused-color));
      fill: var(--contour-viewer-focused-fill-color, var(--focused-fill-color));
    }

    &[data-border] {
      stroke-width: calc(var(--contour-viewer-stroke-width, var(--stroke-width)) + 2px);
      stroke: #000000;
      fill: transparent;

      &[data-focused] {
        stroke-width: calc(var(--contour-viewer-focused-stroke-width, var(--focused-stroke-width)) + 2px);
        stroke: #000000;
      }
    }
  }

  > text {
    fill: var(--contour-viewer-color, var(--color));
    font-family: proximanova, noto_sans, sans-serif;
    font-weight: 600;
    text-anchor: middle;
    dominant-baseline: central;
    transition: fill 120ms ease-out, stroke-width 120ms ease-out;

    &[data-focused] {
      fill: var(--contour-viewer-focused-color, var(--focused-color));
    }

    &[data-border] {
      stroke-width: 4px;
      stroke: #000000;
      fill: transparent;
    }
  }
`},715:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var o=n(672),r=n(0),i=n.n(r),s=n(36),a=n(671),c=n(716),u=n(710);class h extends r.Component{constructor(e){super(e),this.svg=null,this.element=null,this.focused=null,this.preventClickEvent=!1,this.startX=0,this.startY=0,this.contentWindow=window,this.svgRef=e=>{e&&this.svg&&this.element&&(this.deactivateInitialEvents(),this.deactivateMouseDrawEvents(),this.canActivate(this.props)&&(this.svg=e,this.element=this.getElement(this.props),this.activateInitialEvents())),this.svg=e},this.getElement=({draw:e})=>e instanceof this.contentWindow.HTMLElement?e:this.svg,this.canActivate=({draw:e})=>e instanceof this.contentWindow.HTMLElement||!0===e,this.activateInitialEvents=()=>{this.element&&("touch-only"!==this.props.device&&"stylus-only"!==this.props.device&&(this.element.addEventListener("mousemove",this.onMouseMoveToFindFocus),this.element.addEventListener("mousedown",this.onMouseDownToStartDraw)),Object(o.a)()&&"mouse-only"!==this.props.device&&this.element.addEventListener("touchstart",this.onTouchStartToStartDraw),this.element.addEventListener("click",this.onMouseClickToRemove))},this.deactivateInitialEvents=()=>{this.element&&(this.element.removeEventListener("mousemove",this.onMouseMoveToFindFocus),this.element.removeEventListener("mousedown",this.onMouseDownToStartDraw),this.element.removeEventListener("touchstart",this.onTouchStartToStartDraw),this.element.removeEventListener("click",this.onMouseClickToRemove))},this.onMouseMoveToFindFocus=e=>{e.stopPropagation(),this.findFocus(e.pageX,e.pageY)},this.findFocus=(e,t)=>{if(!this.props.contours||0===this.props.contours.length||!this.props.cornerstoneRenderData)return;const n=this.props.cornerstoneRenderData.element,{x:o,y:r}=cornerstone.pageToPixel(n,e,t);this.focused=Object(c.a)(this.props.contours,[o,r]),this.props.onFocus(this.focused)},this.onMouseClickToRemove=e=>{e.stopPropagation(),this.focused&&!this.preventClickEvent&&this.props.onRemove(this.focused)},this.onTouchStartToStartDraw=e=>{if(("stylus-only"===this.props.device||"mouse-and-stylus"===this.props.device)&&"stylus"!==e.targetTouches[0].touchType)return;if(e.targetTouches.length>1)return this.deactivateTouchDrawEvents(),this.activateInitialEvents(),void this.setState(e=>({...e,p1:null,p2:null}));if(1!==e.targetTouches.length)return;if(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),!this.props.cornerstoneRenderData)throw new Error("cornerstoneRenderEventData\ub97c \ucc3e\uc744 \uc218 \uc5c6\ub2e4!");this.preventClickEvent=!1,this.startX=e.targetTouches[0].pageX,this.startY=e.targetTouches[0].pageY,this.deactivateInitialEvents(),this.activateTouchDrawEvents();const t=this.props.cornerstoneRenderData.element,{x:n,y:o}=cornerstone.pageToPixel(t,e.targetTouches[0].pageX,e.targetTouches[0].pageY);this.setState(e=>({...e,p1:[n,o]}))},this.activateTouchDrawEvents=()=>{this.element&&(this.element.addEventListener("touchmove",this.onTouchMoveToDraw),this.element.addEventListener("touchend",this.onTouchEndToEndDraw),this.element.addEventListener("touchcancel",this.onTouchEndToEndDraw),window.addEventListener("keydown",this.onKeyDownToCancelTouchDraw))},this.deactivateTouchDrawEvents=()=>{this.element&&(this.element.removeEventListener("touchmove",this.onTouchMoveToDraw),this.element.removeEventListener("touchend",this.onTouchEndToEndDraw),this.element.removeEventListener("touchcancel",this.onTouchEndToEndDraw),window.removeEventListener("keydown",this.onKeyDownToCancelTouchDraw))},this.onTouchMoveToDraw=e=>{if(1!==e.targetTouches.length||1!==e.changedTouches.length)return this.deactivateTouchDrawEvents(),this.activateInitialEvents(),void this.setState(e=>({...e,p1:null,p2:null}));if(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),!this.props.cornerstoneRenderData)throw new Error("cornerstoneRenderEventData\ub97c \ucc3e\uc744 \uc218 \uc5c6\ub2e4!");!this.preventClickEvent&&Math.max(Math.abs(e.targetTouches[0].pageX-this.startX),Math.abs(e.targetTouches[0].pageY-this.startY))>20&&(this.preventClickEvent=!0);const t=this.props.cornerstoneRenderData.element,{x:n,y:o}=cornerstone.pageToPixel(t,e.targetTouches[0].pageX,e.targetTouches[0].pageY);this.setState(e=>({...e,p2:[n,o]}))},this.onTouchEndToEndDraw=e=>{e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),this.deactivateTouchDrawEvents(),this.activateInitialEvents(),this.state.p1&&this.state.p2&&this.props.onAdd([this.state.p1,this.state.p2],e),this.setState(e=>({...e,p1:null,p2:null}))},this.onKeyDownToCancelTouchDraw=e=>{"escape"===e.key.toLowerCase()&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),this.cancelTouchDraw())},this.cancelTouchDraw=()=>{this.deactivateTouchDrawEvents(),this.activateInitialEvents(),this.setState(e=>({...e,p1:null,p2:null}))},this.onMouseDownToStartDraw=e=>{if(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),!this.props.cornerstoneRenderData)throw new Error("cornerstoneRenderEventData\ub97c \ucc3e\uc744 \uc218 \uc5c6\ub2e4!");this.preventClickEvent=!1,this.startX=e.pageX,this.startY=e.pageY,this.deactivateInitialEvents(),this.activateMouseDrawEvents();const t=this.props.cornerstoneRenderData.element,{x:n,y:o}=cornerstone.pageToPixel(t,e.pageX,e.pageY);this.setState(e=>({...e,p1:[n,o]}))},this.activateMouseDrawEvents=()=>{this.element&&(this.element.addEventListener("mousemove",this.onMouseMoveToDraw),this.element.addEventListener("mouseup",this.onMouseUpToEndDraw),this.element.addEventListener("mouseleave",this.onMouseLeaveToCancelDraw),window.addEventListener("keydown",this.onKeyDownToCancelMouseDraw))},this.deactivateMouseDrawEvents=()=>{this.element&&(this.element.removeEventListener("mousemove",this.onMouseMoveToDraw),this.element.removeEventListener("mouseup",this.onMouseUpToEndDraw),this.element.removeEventListener("mouseleave",this.onMouseLeaveToCancelDraw),window.removeEventListener("keydown",this.onKeyDownToCancelMouseDraw))},this.onMouseMoveToDraw=e=>{if(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),!this.props.cornerstoneRenderData)throw new Error("cornerstoneRenderEventData\ub97c \ucc3e\uc744 \uc218 \uc5c6\ub2e4!");!this.preventClickEvent&&Math.max(Math.abs(e.pageX-this.startX),Math.abs(e.pageY-this.startY))>20&&(this.preventClickEvent=!0);const t=this.props.cornerstoneRenderData.element,{x:n,y:o}=cornerstone.pageToPixel(t,e.pageX,e.pageY);this.setState(e=>({...e,p2:[n,o]}))},this.onMouseUpToEndDraw=e=>{e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),this.deactivateMouseDrawEvents(),this.activateInitialEvents(),this.state.p1&&this.state.p2&&this.props.onAdd([this.state.p1,this.state.p2],e),this.setState(e=>({...e,p1:null,p2:null}))},this.onMouseLeaveToCancelDraw=e=>{e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),this.cancelMouseDraw()},this.onKeyDownToCancelMouseDraw=e=>{"escape"===e.key.toLowerCase()&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),this.cancelMouseDraw())},this.cancelMouseDraw=()=>{this.deactivateMouseDrawEvents(),this.activateInitialEvents(),this.setState(e=>({...e,p1:null,p2:null}))},this.state={p1:null,p2:null}}render(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(a.a,{stateRef:({contentWindow:e})=>this.contentWindow=e}),i.a.createElement("svg",{ref:this.svgRef,role:"figure",width:this.props.width,height:this.props.height,className:this.props.className,style:this.props.style},this.props.cornerstoneRenderData&&this.state.p1&&this.state.p2&&(()=>{const{x:e,y:t}=cornerstone.pixelToCanvas(this.props.cornerstoneRenderData.element,{x:this.state.p1[0],y:this.state.p1[1]}),{x:n,y:o}=cornerstone.pixelToCanvas(this.props.cornerstoneRenderData.element,{x:this.state.p2[0],y:this.state.p2[1]}),r=Math.sqrt(Math.pow(Math.abs(n-e),2)+Math.pow(Math.abs(o-t),2));return i.a.createElement(i.a.Fragment,null,i.a.createElement("circle",{cx:e,cy:t,r:r}),!1!==this.props.animateStroke&&i.a.createElement("circle",{cx:e,cy:t,r:r,"data-highlight":"highlight"}),i.a.createElement("line",{x1:e,y1:t,x2:n,y2:o}))})()))}componentDidMount(){if(!this.svg)throw new Error("<svg> is not initialized");this.canActivate(this.props)&&(this.element=this.getElement(this.props),this.activateInitialEvents())}componentDidUpdate(e){e.draw!==this.props.draw&&(this.element&&(this.deactivateInitialEvents(),this.deactivateMouseDrawEvents()),this.canActivate(this.props)&&(this.element=this.getElement(this.props),this.activateInitialEvents()))}componentWillUnmount(){this.element&&(this.deactivateInitialEvents(),this.deactivateMouseDrawEvents())}}h.defaultProps={device:"all"};const l=Object(s.d)(h)`
  position: absolute;
  top: 0;
  left: 0;

  --color: rgb(255, 224, 0);
  --stroke-width: 4px;
  --fill-color: rgba(255, 224, 0, 0.2);

  > circle:first-child {
    stroke: var(--contour-drawer-color, var(--color));
    stroke-width: var(--contour-drawer-stroke-width, var(--stroke-width));
    fill: var(--contour-drawer-fill-color, var(--fill-color));
  }

  > circle[data-highlight] {
    stroke: #ffffff;
    stroke-width: var(--contour-drawer-stroke-width, var(--stroke-width));
    fill: transparent;
    ${u.a}
  }

  > line {
    stroke: var(--contour-drawer-color, var(--color));
    stroke-width: var(--contour-drawer-stroke-width, var(--stroke-width));
  }
`},716:function(e,t,n){"use strict";function o(e,t){return e.find(e=>{const[[n,o],[r,i]]=e.polygon,[s,a]=t,c=Math.sqrt(Math.pow(Math.abs(r-n),2)+Math.pow(Math.abs(i-o),2));return Math.sqrt(Math.pow(Math.abs(s-n),2)+Math.pow(Math.abs(a-o),2))<=c})||null}n.d(t,"a",(function(){return o}))},717:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var o=n(0),r=n.n(o),i=n(36),s=n(671),a=n(716);class c extends o.Component{constructor(e){super(e),this.svg=null,this.element=null,this.focused=null,this.contentWindow=window,this.svgRef=e=>{e&&this.svg&&this.element&&(this.deactivateInitialEvents(),this.canActivate(this.props)&&(this.svg=e,this.element=this.getElement(this.props),this.activateInitialEvents())),this.svg=e},this.getElement=({hover:e})=>e instanceof this.contentWindow.HTMLElement?e:this.svg,this.canActivate=({hover:e})=>e instanceof this.contentWindow.HTMLElement||!0===e,this.activateInitialEvents=()=>{this.element&&this.element.addEventListener("mousemove",this.onMouseMoveToFindFocus)},this.deactivateInitialEvents=()=>{this.element&&this.element.removeEventListener("mousemove",this.onMouseMoveToFindFocus)},this.onMouseMoveToFindFocus=e=>{this.findFocus(e.pageX,e.pageY)},this.findFocus=(e,t)=>{if(!this.props.contours||0===this.props.contours.length||!this.props.cornerstoneRenderData)return;const n=this.props.cornerstoneRenderData.element,{x:o,y:r}=cornerstone.pageToPixel(n,e,t);this.focused=Object(a.a)(this.props.contours,[o,r]),this.props.onFocus(this.focused)},this.state={p1:null,p2:null}}render(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,{stateRef:({contentWindow:e})=>this.contentWindow=e}),r.a.createElement("svg",{ref:this.svgRef,role:"figure",width:this.props.width,height:this.props.height,className:this.props.className}))}componentDidMount(){if(!this.svg)throw new Error("<svg> is not initialized");this.canActivate(this.props)&&(this.element=this.getElement(this.props),this.activateInitialEvents())}componentDidUpdate(e){e.hover!==this.props.hover&&(this.element&&this.deactivateInitialEvents(),this.canActivate(this.props)&&(this.element=this.getElement(this.props),this.activateInitialEvents()))}componentWillUnmount(){this.element&&this.deactivateInitialEvents()}}const u=Object(i.d)(c)`
  position: absolute;
  top: 0;
  left: 0;
`},718:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var o=n(0),r=n.n(o);function i({cornerstoneImage:e,width:t,height:n}){const i=Object(o.useRef)(null);return Object(o.useEffect)(()=>{const t=e.image.subscribe(e=>{if(i.current&&(cornerstone.disable(i.current),cornerstone.enable(i.current),e)){const t=cornerstone.getDefaultViewportForImage(i.current,e);cornerstone.displayImage(i.current,e,t)}});return()=>{t.unsubscribe()}},[e]),r.a.createElement("div",{ref:i,style:{width:t,height:n}})}},719:function(e,t,n){"use strict";n(0);n(36).d.div`
  display: inline-block;
  background-color: #000000;
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center center;
`},720:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var o=n(653),r=n(641),i=n(646),s=n(662),a=n(645),c=n(658),u=n(663),h=n(88),l=n(0),d=n.n(l),p=n(36);function m({children:e,options:t}){const[n,o]=Object(l.useState)(()=>Array.isArray(t.width)?t.width[0]:t.width),[r,i]=Object(l.useState)(()=>Array.isArray(t.height)?t.height[0]:t.height),[s,a]=Object(l.useState)(()=>Array.isArray(t.control)?t.control[0]:t.control),[c,u]=Object(l.useState)(()=>Array.isArray(t.wheel)?t.wheel[0]:t.wheel),[h,p]=Object(l.useState)(()=>Array.isArray(t.invert)?t.invert[0]:t.invert),[m,g]=Object(l.useState)(()=>Array.isArray(t.flip)?t.flip[0]:t.flip),[f,w]=Object(l.useState)(Date.now()),E=Object(l.useMemo)(()=>({options:t,width:n,height:r,control:s,wheel:c,invert:h,flip:m,resetTime:f,updateWidth:o,updateHeight:i,updateControl:a,updateWheel:u,updateInvert:p,updateFlip:g,updateResetTime:w}),[t,n,r,s,c,h,m,f,o,i,a,u,p,g,w]);return d.a.createElement(l.Fragment,null,e(E),d.a.createElement(v,E))}function v({options:e,width:t,height:n,control:o,wheel:l,invert:p,flip:m,resetTime:v,updateWidth:f,updateHeight:w,updateControl:E,updateWheel:b,updateInvert:I,updateFlip:y,updateResetTime:x}){return d.a.createElement(g,null,Array.isArray(e.width)&&d.a.createElement(d.a.Fragment,null,d.a.createElement(h.a,{gutterBottom:!0},"Width"),d.a.createElement(u.a,{color:"primary",value:t,min:e.width[1],max:e.width[2],onChange:(e,t)=>f(t)})),Array.isArray(e.height)&&d.a.createElement(d.a.Fragment,null,d.a.createElement(h.a,{gutterBottom:!0},"Height"),d.a.createElement(u.a,{color:"primary",value:n,min:e.height[1],max:e.height[2],onChange:(e,t)=>w(t)})),Array.isArray(e.control)&&d.a.createElement(d.a.Fragment,null,d.a.createElement(h.a,{gutterBottom:!0},"Control"),d.a.createElement(s.a,{value:o,onChange:(e,t)=>E(t)},e.control[1].map(e=>d.a.createElement(a.a,{color:"primary",key:e,value:e,control:d.a.createElement(c.a,{color:"primary"}),label:e.toUpperCase()})))),Array.isArray(e.wheel)&&d.a.createElement(d.a.Fragment,null,d.a.createElement(h.a,{gutterBottom:!0},"Wheel"),d.a.createElement(s.a,{value:l,onChange:(e,t)=>b(t)},e.wheel[1].map(e=>d.a.createElement(a.a,{color:"primary",key:e,value:e,control:d.a.createElement(c.a,{color:"primary"}),label:e.toUpperCase()})))),Array.isArray(e.invert)&&d.a.createElement(d.a.Fragment,null,d.a.createElement(h.a,{gutterBottom:!0},"Invert"),d.a.createElement(i.a,{checked:p,color:"primary",onChange:(e,t)=>I(t)})),Array.isArray(e.flip)&&d.a.createElement(d.a.Fragment,null,d.a.createElement(h.a,{gutterBottom:!0},"Flip"),d.a.createElement(i.a,{checked:m,color:"primary",onChange:(e,t)=>y(t)})),d.a.createElement(h.a,{gutterBottom:!0},"Reset"),d.a.createElement(r.a,{variant:"contained",color:"primary",onClick:()=>x(Date.now())},"Reset"))}const g=Object(p.d)(o.a)`
  position: absolute;
  top: 10px;
  right: 10px;
  width: 200px;
`},721:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var o=n(0),r=n.n(o);function i({fontFamily:e="proximanova,noto_sanslight,sans-serif",fontSize:t=12,strokeWidth:n=6,strokeColor:i="#000000",children:s}){const[a,c]=Object(o.useState)(100),u=Object(o.useMemo)(()=>t+2*n,[t,n]),h=Object(o.useRef)(null),l=Object(o.useMemo)(()=>r.a.createElement(r.a.Fragment,null,Object(o.cloneElement)(s,{ref:h,x:n,y:n,stroke:i,strokeWidth:n,strokeLinejoin:"round",strokeLinecap:"round",dominantBaseline:"mathematical",fontFamily:e}),Object(o.cloneElement)(s,{x:n,y:n,dominantBaseline:"mathematical",fontFamily:e})),[s,e,i,n]);return Object(o.useLayoutEffect)(()=>{var e;const t=null===(e=h.current)||void 0===e?void 0:e.getBoundingClientRect();t&&c(t.width+2*n)},[n,l]),r.a.createElement("svg",{width:a,height:u,style:{pointerEvents:"none",userSelect:"none",fontSize:t}},l)}},722:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o=n(0),r=n.n(o),i=n(671);class s extends o.Component{constructor(...e){super(...e),this.element=void 0,this.currentViewport=null,this.currentImage=null,this.teardownInteraction=null,this.imageSubscription=null,this.needImageInitialize=!0,this.contentWindow=window,this.elementRef=e=>{this.element=e,e&&this.startInteraction(this.props.interactions)},this.initImage=e=>{cornerstone.disable(this.element),cornerstone.enable(this.element,{renderer:"webgl"});let t=this.getDefaultViewport(e,this.element);if(!t)throw new Error("defaultViewport\ub294 null\uc77c \uc218 \uc5c6\ub2e4.");if(Array.isArray(this.props.defaultViewportTransforms)){const e=t.scale;for(const n of this.props.defaultViewportTransforms){const o=n({element:this.element,currentViewport:t,minScale:e,maxScale:3});t={...t,...o}}}t={...t,hflip:this.props.flip,invert:this.props.invert},cornerstone.displayImage(this.element,e,t),this.setImage(e),this.setViewport(t),this.startInteraction(this.props.interactions)},this.subscribeImage=e=>{if(e)if(e.voiLUT=void 0,this.needImageInitialize)this.needImageInitialize=!1,this.initImage(e);else{if(!this.currentViewport)throw new Error("\uc5b4\ub5a4 \uc0c1\ud669\uc778\uc9c0 \ud655\uc778 \ud544\uc694!!!");cornerstone.displayImage(this.element,e,this.currentViewport)}},this.onImageRenderered=e=>{const t=e.detail;t&&t.canvasContext&&t.element&&t.enabledElement&&t.image&&"number"===typeof t.renderTimeInMs&&t.viewport?(this.currentViewport=t.viewport,this.props.updateCornerstoneRenderData(t)):console.error("CornerstoneEventData\uc5d0 \uc5c6\ub294 \uc815\ubcf4\uac00 \uc788\ub2e4???",t)},this.startInteraction=e=>{this.teardownInteraction&&this.teardownInteraction.forEach(e=>e()),this.teardownInteraction=e.filter(e=>"function"===typeof e).map(e=>e(this))},this.getElement=()=>this.element,this.getContentWindow=()=>this.contentWindow,this.getCurrentViewport=()=>this.currentViewport,this.getDefaultViewport=(e,t)=>e&&t?cornerstone.getDefaultViewportForImage(t,e):null,this.getMinScale=()=>{const e=this.getDefaultViewport(this.currentImage,this.element);if(!e)throw new Error("viewport\uac00 \uc815\uc0c1\uc801\uc73c\ub85c \uc640\uc57c\ub9cc \ud55c\ub2e4");return e.scale},this.getMaxScale=()=>3,this.updateViewport=e=>{this.currentViewport&&this.updateCurrentViewport(e)},this.getViewportTransformParams=()=>({element:this.element,minScale:this.getMinScale(),maxScale:this.getMaxScale(),currentViewport:this.currentViewport}),this.setCornerstoneImage=e=>{this.needImageInitialize=!0,this.setImage(null),this.imageSubscription&&(this.imageSubscription.unsubscribe(),this.imageSubscription=null),this.imageSubscription=e.image.subscribe(this.subscribeImage)},this.setImage=e=>{this.currentImage=e},this.setViewport=e=>{this.currentViewport=e,cornerstone.setViewport(this.element,this.currentViewport)},this.updateCurrentViewport=e=>{if(!this.currentViewport)throw new Error("viewport\uac00 \uc5c6\ub294 \uc0c1\ud0dc\uc5d0\uc11c \uc2e4\ud589\ub418\uba74 \uc548\ub41c\ub2e4");const t="function"===typeof e?e(this.currentViewport):e;this.currentViewport={...this.currentViewport,...t},cornerstone.setViewport(this.element,this.currentViewport)}}render(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(i.a,{stateRef:({contentWindow:e})=>this.contentWindow=e}),r.a.createElement("div",{ref:this.elementRef,style:{width:this.props.width,height:this.props.height}}))}componentDidMount(){this.element.addEventListener(cornerstone.EVENTS.IMAGE_RENDERED,this.onImageRenderered),this.setCornerstoneImage(this.props.image)}componentWillUnmount(){this.element.removeEventListener(cornerstone.EVENTS.IMAGE_RENDERED,this.onImageRenderered),cornerstone.disable(this.element),this.imageSubscription&&this.imageSubscription.unsubscribe(),this.teardownInteraction&&this.teardownInteraction.forEach(e=>e())}componentDidUpdate(e){const{width:t,height:n,flip:o,invert:r,interactions:i,resetTime:s,image:a}=this.props,c=this.getDefaultViewport(this.currentImage,this.element);if(e.interactions!==i&&this.startInteraction(i),c&&(e.resetTime!==s?this.updateCurrentViewport({...c,hflip:o,invert:c.invert?!r:r}):e.flip===o&&e.invert===r||this.updateCurrentViewport({hflip:o,invert:c.invert?!r:r})),(e.width!==t||e.height!==n)&&this.currentImage){cornerstone.resize(this.element);const e=cornerstone.getViewport(this.element);if(!e)throw new Error("getViewport() is returns not a Viewport");this.setViewport(e)}e.image!==a&&this.setCornerstoneImage(a)}}},723:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n(704);const r=({element:e}={})=>({getElement:t,getCurrentViewport:n,updateViewport:r,getContentWindow:i})=>(e||(e=t()),Object(o.a)({element:e,getCurrentViewport:n,onMove:e=>r({voi:e}),onEnd:()=>{},contentWindow:i()}))},724:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n(705);const r=({element:e}={})=>({getElement:t,getCurrentViewport:n,getContentWindow:r,updateViewport:i})=>(e||(e=t()),Object(o.a)({element:e,getCurrentViewport:n,onMove:e=>i({translation:e}),onEnd:()=>{},contentWindow:r()}))},725:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n(706);const r=({element:e}={})=>({getElement:t,updateViewport:n,getCurrentViewport:r,getContentWindow:i,getMinScale:s,getMaxScale:a})=>(e||(e=t()),Object(o.a)({element:e,getMinMaxScale:()=>[s(),a()],getCurrentViewport:r,onZoom:e=>n(e),contentWindow:i()}))},726:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n(0);function r(e){const[t,n]=Object(o.useState)(()=>({current:e.getIndex(),end:e.length()-1}));return Object(o.useEffect)(()=>{const t=e.index.subscribe(t=>{n(n=>({...n,current:t,end:e.length()-1}))});return()=>{t.unsubscribe()}},[e]),t}},727:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var o=n(672),r=n(0);function i({image:e,element:t,enabled:n=!0,touchDirection:i="vertical"}){Object(r.useEffect)(()=>{if(!t||!0!==n)return()=>{};function r(t){t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),t.deltaY>0?e.prev():t.deltaY<0&&e.next()}let s=-1,a=null;function c(n){if(2===n.targetTouches.length){if(n.stopPropagation(),n.stopImmediatePropagation(),n.preventDefault(),s=e.getIndex(),a={x:n.targetTouches[0].pageX,y:n.targetTouches[0].pageY},!t)throw new Error("undefined element!!!");t.removeEventListener("touchstart",c),t.addEventListener("touchmove",u),t.addEventListener("touchend",h),t.addEventListener("touchcancel",h)}}function u(t){if(2!==t.targetTouches.length||2!==t.changedTouches.length||!a)return;t.stopPropagation(),t.stopImmediatePropagation(),t.preventDefault();const n=t.targetTouches[0].pageX-a.x,o=t.targetTouches[0].pageY-a.y,r="vertical"===i?o:n;e.goto(s+Math.floor(r/10))}function h(e){if(!t)throw new Error("undefined element!!!");t.removeEventListener("touchmove",u),t.removeEventListener("touchend",h),t.removeEventListener("touchcancel",h),t.addEventListener("touchstart",c)}return t.addEventListener("wheel",r),Object(o.a)()&&t.addEventListener("touchstart",c),()=>{t.removeEventListener("wheel",r),t.removeEventListener("touchstart",c),t.removeEventListener("touchmove",u),t.removeEventListener("touchend",h),t.removeEventListener("touchcancel",h)}},[e,t,n,i])}},728:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n(0);function r(){const[e,t]=Object(o.useState)(null);return{cornerstoneRenderData:e,updateCornerstoneRenderData:t}}},729:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o=n(745),r=n(730),i=n(0);function s({nextId:e,initialContours:t,mode:n="contour"}={}){const[s,c]=Object(i.useState)(()=>{if(t){const n="number"===typeof e?e:e&&"number"===typeof e.current?e.current:1;return t.map((e,t)=>({...e,id:n+t}))}return[]}),[u,h]=Object(i.useState)(null),l=Object(i.useCallback)((t,i={})=>{if("contour"===n&&(!Object(r.a)(t)||Object(o.a)(t)))return null;const{dataAttrs:s}=i;s&&a(s);let u=null;return c(n=>(u={...i,id:"number"===typeof e?e:e&&"number"===typeof e.current?e.current:Math.max(...n.map(({id:e})=>e),0)+1,polygon:t,dataAttrs:s},[...n,u])),u},[e,n]),d=Object(i.useCallback)(t=>{for(const e of t)e.dataAttrs&&a(e.dataAttrs);c(n=>{const o="number"===typeof e?e:e&&"number"===typeof e.current?e.current:Math.max(...n.map(({id:e})=>e),0)+1;return[...n,...t.map((e,t)=>({...e,id:o+t}))]})},[e]),p=Object(i.useCallback)((e,t)=>{if(t.polygon&&"contour"===n&&(!Object(r.a)(t.polygon)||Object(o.a)(t.polygon)))return;t.dataAttrs&&a(t.dataAttrs);const i={...e,...t,id:e.id};return c(t=>{const n=[...t],o=n.findIndex(({id:e})=>i.id===e);return o>-1&&(n[o]=i,h(t=>e===t?i:t)),n}),i},[n]),m=Object(i.useCallback)(e=>{h(t=>e!==t?e:t)},[]),v=Object(i.useCallback)(()=>{c([]),h(null)},[]);return{contours:s,addContour:l,addContours:d,updateContour:p,removeContour:Object(i.useCallback)(e=>{c(t=>{const n=t.findIndex(({id:t})=>t===e.id);if(n>-1){const e=[...t];return e.splice(n,1),e}return t}),h(null)},[]),removeAllContours:v,focusContour:m,focusedContour:u,reset:Object(i.useCallback)(({initialContours:t}={})=>{c(()=>{if(t){const n="number"===typeof e?e:e&&"number"===typeof e.current?e.current:1;return t.map((e,t)=>({...e,id:n+t}))}return[]})},[e])}}function a(e){e&&Object.keys(e).forEach(e=>{if(!/^data-/.test(e))throw new Error(`Contour.dataAttrs \uc18d\uc131\uc740 data-* \ud615\ud0dc\uc758 \uc774\ub984\uc73c\ub85c \uc785\ub825\ub418\uc5b4\uc57c \ud569\ub2c8\ub2e4 (${e})`)})}},730:function(e,t,n){"use strict";function o(e,t=100){let n=0;for(let o=0,r=e.length;o<r;o++){n+=e[o][0]*e[o===e.length-1?0:o+1][1]*.5,n-=e[o===e.length-1?0:o+1][0]*e[o][1]*.5}return Math.abs(n)>t}n.d(t,"a",(function(){return o}))},731:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n(0);function r(...e){const t=Object(o.useCallback)(({viewport:t})=>{const{hflip:n,vfilip:o,translation:r,scale:i}=t;for(const s of e)"updateViewport"in s?s.updateViewport({hflip:n,vfilip:o,translation:r,scale:i}):"current"in s&&s.current&&s.current.updateViewport({hflip:n,vfilip:o,translation:r,scale:i})},[...e]);return Object(o.useMemo)(()=>({updateMasterRenderData:t}),[t])}},732:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o=n(0),r=n(654),i=n(647);function s(e){const[t,n]=Object(o.useState)(null);return Object(o.useEffect)(()=>{if(e){const t=Object(r.a)(e).pipe(Object(i.a)(e=>e.reduce((e,t)=>e+t,0)/e.length)).subscribe(e=>{e>=1&&(n(new Date),t.unsubscribe())});return()=>{t.unsubscribe()}}},[e]),t}},733:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return u}));var o=n(0),r=n.n(o),i=n(680);const s=Object(o.createContext)();function a(e){return new i.a(e)}function c({cacheImages:e=10,factory:t=a,children:n}){const[i]=Object(o.useState)(()=>[]),c=Object(o.useCallback)(n=>{let o=i.find(([e])=>e===n);if(!o&&(o=[n,t(n)],i.push(o),i.length>e)){const t=i.length-e,n=i.splice(0,t);for(const e of n)e[1].destroy()}return o[1]},[i,e,t]),u=Object(o.useCallback)(e=>{const t=i.findIndex(([t])=>t===e);if(t>-1){const e=i.splice(t,1);for(const t of e)t[1].destroy()}},[i]);return Object(o.useEffect)(()=>()=>{for(const e of i)e[1].destroy()},[i]),r.a.createElement(s.Provider,{value:{fetch:c,purge:u}},n)}function u(){return Object(o.useContext)(s)}s.Consumer},734:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));const o=e=>(t,n,o={},r={})=>{const{cornerstone:i}=cornerstoneWADOImageLoader.external,s=new XMLHttpRequest;return new Promise((a,c)=>{s.open("get",t,!0),s.responseType="arraybuffer",Object.keys(o).forEach(e=>{s.setRequestHeader(e,o[e])}),r.deferred={resolve:a,reject:c},r.url=t,r.imageId=n,"function"===typeof e&&e((function(){try{s.abort()}catch(e){}})),s.onreadystatechange=()=>{4===s.readyState&&200===s.status&&a(s.response)},s.onloadstart=()=>{const e={url:t,imageId:n};i&&i.triggerEvent(i.events,"cornerstoneimageloadstart",e)},s.onloadend=()=>{const e={url:t,imageId:n};i.triggerEvent(i.events,"cornerstoneimageloadend",e)},s.onprogress=({loaded:e,lengthComputable:o,total:r})=>{let s;o&&(s=Math.round(e/r*100));const a={url:t,imageId:n,loaded:e,total:r,percentComplete:s};i.triggerEvent(i.events,"cornerstoneimageloadprogress",a)},s.send()})}},735:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var o=n(659),r=n(647),i=n(676),s=n(677),a=n(734);function c(e){return null!==e}const u=new i.a;class h{constructor(e,t={}){this.imageIds=e,this.options=t,this._images=void 0,this._imageSubject=void 0,this._progressSubject=void 0,this._indexSubject=void 0,this._cancel=[],this._loader=void 0,this._destoyed=!1,this.onProgress=e=>{const t=Object(s.a)(e);if(t){const e=this.imageIds.indexOf(t.imageId);if(e>-1){const n=[...this._progressSubject.getValue()];n[e]=t.loaded/t.total,this._progressSubject.next(n)}}},this.destroy=()=>{this.options&&"function"===typeof this.options.unload&&this.options.unload(this.imageIds),this._imageSubject.unsubscribe(),cornerstone.events.removeEventListener("cornerstoneimageloadprogress",this.onProgress),this._cancel.forEach(e=>e()),this._destoyed=!0},this.length=()=>this._images.length,this.getIndex=()=>this._indexSubject.getValue(),this.goto=e=>{this.change(Math.max(0,Math.min(this._images.length-1,e)))},this.next=(e=1)=>{this.change(Math.min(this._images.length-1,this._indexSubject.getValue()+e))},this.prev=(e=1)=>{this.change(Math.max(0,this._indexSubject.getValue()-e))},this.change=e=>{if(this._indexSubject.next(e),this._images[e])return void this._imageSubject.next(this._images[e]);const t=this._images.slice(0,e-1).filter(c).reverse();if(t.length>0)return void this._imageSubject.next(t[0]);const n=this._images.slice(e+1).filter(c);n.length>0?this._imageSubject.next(n[0]):console.warn("\ub300\uccb4\ud560 Image\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc74c")},this.loadImage=async(e,t)=>{try{this._images[t]=await this._loader.loadImage({imageId:e,options:{loader:Object(a.a)(e=>this._cancel.push(e))}});const n=[...this._progressSubject.getValue()];n[t]=1,n.reduce((e,t)=>e+t,0)>=1&&cornerstone.events.removeEventListener("cornerstoneimageloadprogress",this.onProgress),this._destoyed||this._progressSubject.next(n)}catch(n){this._destoyed||(console.warn(`It will retry loadImage(${e}):`,n),this.loadImage(e,t))}},this._images=e.map(()=>null);const{initialIndex:n=0}=t;this._imageSubject=new o.a(null),this._indexSubject=new o.a(n),this._progressSubject=new o.a(e.map(()=>0)),this._loader=t.loader||u,cornerstone.events.addEventListener("cornerstoneimageloadprogress",this.onProgress),this.loadImage(e[n],n).then(()=>{this.change(this._indexSubject.getValue()),e.forEach((e,t)=>{t!==n&&this.loadImage(e,t).then(()=>{t===this._indexSubject.getValue()&&this.change(this._indexSubject.getValue())})})})}get image(){return this._imageSubject.asObservable()}get progress(){return this._progressSubject.pipe(Object(r.a)(e=>e.reduce((e,t)=>e+t,0)/e.length))}get index(){return this._indexSubject.asObservable()}}},736:function(e,t,n){"use strict"},737:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n(659);function r({url:e,signal:t,headers:n}){const r=new o.a(0),i=new XMLHttpRequest;if(i.open("get",e,!0),i.responseType="arraybuffer",n instanceof Headers||Array.isArray(n))for(const[o,a]of n)i.setRequestHeader(o,a);else n&&Object.keys(n).forEach(e=>{i.setRequestHeader(e,n[e])});const s=()=>{try{i.abort()}catch(e){}null===t||void 0===t||t.removeEventListener("abort",s)};return null===t||void 0===t||t.addEventListener("abort",s),i.onloadstart=()=>{r.next(0)},i.onreadystatechange=()=>{4===i.readyState&&200===i.status&&(r.next(i.response),null===t||void 0===t||t.removeEventListener("abort",s))},i.onprogress=({loaded:e,lengthComputable:t,total:n})=>{t&&r.next(e/n)},i.send(),r.asObservable()}},738:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n(659);function r({blob:e,signal:t}){const n=new o.a(0),r=new FileReader,i=()=>{try{r.abort()}catch(e){}null===t||void 0===t||t.removeEventListener("abort",i)};return null===t||void 0===t||t.addEventListener("abort",i),r.onloadstart=()=>{n.next(0)},r.onloadend=()=>{n.next(r.result),null===t||void 0===t||t.removeEventListener("abort",i)},r.onprogress=({loaded:e,lengthComputable:t,total:o})=>{t&&n.next(e/o)},r.readAsArrayBuffer(e),n.asObservable()}},739:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o=n(659),r=n(647);const i=new(n(676).a);class s{constructor(e,t={}){this.file=e,this.options=t,this._imageSubject=void 0,this._imageId=void 0,this._loader=void 0,this._destoyed=!1,this.destroy=()=>{this.options&&"function"===typeof this.options.unload&&this.options.unload(this._imageId),this._destoyed=!0},this.loadImage=async()=>{try{const e=await this._loader.loadImage({imageId:this._imageId});this._destoyed||this._imageSubject.next(e)}catch(e){this._destoyed||(console.warn(`It will retry loadImage(${this._imageId}):`,e),this.loadImage())}},this._imageSubject=new o.a(null),this._loader=t.loader||i,this._imageId=cornerstoneWADOImageLoader.wadouri.fileManager.add(e),this.loadImage()}get image(){return this._imageSubject.asObservable()}get progress(){return this._imageSubject.pipe(Object(r.a)(e=>e?1:0))}}},740:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n(659);class r{constructor({progress:e,images:t,initialIndex:n="center"}){this._imageSubject=void 0,this._indexSubject=void 0,this._imagesSubscription=void 0,this._progress=void 0,this._images=null,this.length=()=>{var e;return(null===(e=this._images)||void 0===e?void 0:e.length)||0},this.getIndex=()=>this._indexSubject.getValue(),this.goto=e=>{if(!this._images)return;const t=Math.max(0,Math.min(this._images.length-1,e));this._imageSubject.next(this._images[t]),this._indexSubject.next(t)},this.next=(e=1)=>{if(!this._images)return;const t=Math.min(this._images.length-1,this._indexSubject.getValue()+e);this._imageSubject.next(this._images[t]),this._indexSubject.next(t)},this.prev=(e=1)=>{if(!this._images)return;const t=Math.max(0,this._indexSubject.getValue()-e);this._imageSubject.next(this._images[t]),this._indexSubject.next(t)},this.destroy=()=>{this._imagesSubscription.unsubscribe(),this._imageSubject.unsubscribe(),this._indexSubject.unsubscribe()},this._imagesSubscription=t.subscribe(e=>{let t;this._images=e,t="start"===n?0:"center"===n?Math.round(e.length/2):"end"===n?e.length-1:n,this._imageSubject.next(e[t]),this._indexSubject.next(t),this._imagesSubscription.unsubscribe()}),this._progress=e,this._imageSubject=new o.a(null),this._indexSubject=new o.a(0)}get image(){return this._imageSubject.asObservable()}get progress(){return this._progress}get index(){return this._indexSubject.asObservable()}}},741:function(e,t,n){"use strict"},742:function(e,t,n){"use strict";n(0);var o=n(36),r=n(681);o.b`
  html {
    font-size: 14px;
    box-sizing: border-box;
  }
  
  ${r.b}
`},744:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o=n(675),r=n(0),i=n.n(r);class s extends r.Component{constructor(...e){super(...e),this.canvasRef=Object(r.createRef)(),this.ctx=null,this.imageData=null,this.imageResourceCanvas=null,this.drawHeatmap=({cornerstoneRenderData:e})=>{if(this.imageData&&this.imageResourceCanvas&&this.ctx&&e)try{this.ctx.save(),this.imageResourceCanvas.width=this.imageData.width,this.imageResourceCanvas.height=this.imageData.height,this.imageResourceCanvas.getContext("2d").putImageData(this.imageData,0,0),cornerstone.setToPixelCoordinateSystem(e.enabledElement,this.ctx);const t=e.image.width,n=e.image.height;this.ctx.drawImage(this.imageResourceCanvas,0,0,this.imageResourceCanvas.width,this.imageResourceCanvas.height,0,0,t,n),this.ctx.restore()}catch(t){console.error(t)}}}render(){return i.a.createElement(a,{ref:this.canvasRef,width:this.props.width,height:this.props.height,style:{width:this.props.width,height:this.props.height}})}componentDidMount(){if(this.imageResourceCanvas=document.createElement("canvas"),!this.canvasRef.current)throw new Error("<canvas> is not initialized");if(this.ctx=this.canvasRef.current.getContext("2d"),!this.ctx)throw new Error("<canvas> context 2d is not initialized");this.imageData=Object(o.b)(this.props.posMap,this.props.threshold),this.drawHeatmap(this.props)}componentDidUpdate(e){const{width:t,height:n,posMap:r,threshold:i,cornerstoneRenderData:s}=this.props;e.posMap===r&&e.threshold===i||(this.imageData=Object(o.b)(r,i)),e.posMap===r&&e.threshold===i&&e.cornerstoneRenderData===s||(!function(e,t,n){e.save(),e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,t,n),e.restore()}(this.ctx,t,n),this.drawHeatmap(this.props))}}const a=n(36).d.canvas`
  position: absolute;
  top: 0;
  left: 0;
  pointer-events: none;
`},745:function(e,t,n){"use strict";function o(e,t,n,o){if(Math.max(e[0],t[0])<=Math.min(n[0],o[0]))return!1;if(Math.min(e[0],t[0])>=Math.max(n[0],o[0]))return!1;if(Math.max(e[1],t[1])<=Math.min(n[1],o[1]))return!1;if(Math.min(e[1],t[1])>=Math.max(n[1],o[1]))return!1;const r=(t[0]-e[0])*(n[1]-e[1])-(n[0]-e[0])*(t[1]-e[1]),i=(t[0]-e[0])*(o[1]-e[1])-(o[0]-e[0])*(t[1]-e[1]),s=(o[0]-n[0])*(e[1]-n[1])-(e[0]-n[0])*(o[1]-n[1]),a=(o[0]-n[0])*(t[1]-n[1])-(t[0]-n[0])*(o[1]-n[1]);return 0===r&&0===i&&0===s&&0===a||r*i<0&&s*a<0}function r(e){const t=[...e,e[0]],n=t.length;let r=-1;for(;++r<n-2;){let e=r+2;for(;++e<n-1;)if(o(t[r],t[r+1],t[e],t[e+1]))return!0}return!1}n.d(t,"a",(function(){return r}))},746:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o=n(34);function r(e){const t=new Uint8Array(e);return String.fromCharCode.apply(null,t)}function i(e){if("NUMPY"!==r(e.slice(0,6)).slice(1,6))throw new Error("unknown file type");let t,n=function(e){let t=new DataView(e),n=t.getUint8(0);return n|=t.getUint8(1)<<8,n}(e.slice(8,10)),o=10+n,i=r(e.slice(10,10+n)).toLowerCase().replace(/\(/g,"[").replace(/\)/g,"]").replace(/'/g,'"').replace(", }","}"),s=JSON.parse(i);if("|u1"===s.descr)t=new Uint8Array(e,o);else if("|i1"===s.descr)t=new Int8Array(e,o);else if("<u2"===s.descr)t=new Uint16Array(e,o);else if("<i2"===s.descr)t=new Int16Array(e,o);else if("<u4"===s.descr)t=new Uint32Array(e,o);else if("<i4"===s.descr)t=new Int32Array(e,o);else if("<f4"===s.descr)t=new Float32Array(e,o);else{if("<f8"!==s.descr)throw new Error("unknown numeric dtype");t=new Float64Array(e,o)}return{shape:s.shape,isFortranOrder:s.fortran_order,data:t}}const s=({id:e,windowCenter:t,windowWidth:n,sliceSpacing:r,rowPixelSpacing:s,columnPixelSpacing:a,slope:c=1,intercept:u=0,minPixelValue:h=-2048,maxPixelValue:l=3096})=>d=>new o.a(o=>{const p=d.subscribe(d=>{const{shape:[,m,v,g],data:f}=i(d),w=[],E=[],b=[],I=g*v;for(let o=0;o<m;o++){const i=new Int16Array(I);for(let e=0;e<I;e++)i[e]=f[o*I+e];w.push({imageId:e+"_axial_"+o,minPixelValue:h,maxPixelValue:l,slope:c,intercept:u,windowCenter:t,windowWidth:n,getPixelData:()=>i,rows:v,columns:g,height:v,width:g,color:!1,columnPixelSpacing:a,rowPixelSpacing:s,invert:!1,sizeInBytes:g*v*Int16Array.BYTES_PER_ELEMENT,sliceSpacing:r})}const y=m,x=g;for(let o=0;o<v;o++){const i=new Int16Array(y*x);for(let e=0;e<x;e++)for(let t=0;t<y;t++)i[e+(y-t-1)*x]=f[e+t*I+o*x];E.push({imageId:e+"_coronal_"+o,minPixelValue:h,maxPixelValue:l,slope:c,intercept:u,windowCenter:t,windowWidth:n,getPixelData:()=>i,rows:y,columns:x,height:y,width:x,color:!1,columnPixelSpacing:a,rowPixelSpacing:r,invert:!1,sizeInBytes:y*x*Int16Array.BYTES_PER_ELEMENT,sliceSpacing:s});const d=m,p=v,w=new Int16Array(d*p);for(let e=0;e<p;e++)for(let t=0;t<d;t++)w[e+(d-t-1)*p]=f[e*g+t*I+o];b.push({imageId:e+"_sagittal_"+o,minPixelValue:h,maxPixelValue:l,slope:c,intercept:u,windowCenter:t,windowWidth:n,getPixelData:()=>w,rows:d,columns:p,height:d,width:p,color:!1,columnPixelSpacing:s,rowPixelSpacing:r,invert:!1,sizeInBytes:d*p*Int16Array.BYTES_PER_ELEMENT,sliceSpacing:a})}return o.next({axial:w,coronal:E,sagittal:b}),()=>{p.unsubscribe()}},e=>o.error(e),()=>o.complete())})},747:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var o=n(0),r=n.n(o),i=n(36);const s=Object(i.d)((function({x:e,y:t,label:n,onEnter:i,onLeave:s,onRemove:a,...c}){const u=Object(o.useCallback)(e=>{e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),e.preventDefault(),a()},[a]);return r.a.createElement("g",Object.assign({},c,{transform:`translate(${e} ${t})`,onMouseEnter:i,onMouseLeave:s,onClick:u}),r.a.createElement("circle",{cx:0,cy:0,r:4}),r.a.createElement("path",{d:"M8,16c0,0,6-5.582,6-10s-2.686-6-6-6S2,1.582,2,6S8,16,8,16z M5,5c0-1.657,1.343-3,3-3s3,1.343,3,3S9.657,8,8,8S5,6.657,5,5  z",transform:"translate(-8 -16)","data-border":"border"}),r.a.createElement("path",{d:"M8,16c0,0,6-5.582,6-10s-2.686-6-6-6S2,1.582,2,6S8,16,8,16z M5,5c0-1.657,1.343-3,3-3s3,1.343,3,3S9.657,8,8,8S5,6.657,5,5  z",transform:"translate(-8 -16)"}),n&&r.a.createElement("g",{transform:"translate(0 -25)"},r.a.createElement("text",null,n),r.a.createElement("text",null,n)))}))`
  cursor: pointer;

  color: var(--pin-color, #ffffff);

  &[data-focused] {
    color: var(--pin-focused-color, rgb(255, 194, 17));
  }

  > circle {
    fill: #000000;
  }

  > path {
    fill: currentColor;

    &[data-border] {
      stroke-width: 4px;
      stroke: #000000;
    }
  }

  > g {
    text {
      text-anchor: middle;
      font-size: 14px;
      font-weight: bold;
    }

    text:first-child {
      stroke-width: 4px;
      stroke: #000000;
    }

    text:last-child {
      fill: currentColor;
    }
  }
`;class a extends o.Component{constructor(...e){super(...e),this.onPointAdd=e=>{if("function"===typeof this.props.onAdd&&this.props.cornerstoneRenderData&&this.props.cornerstoneRenderData.element){const t=this.props.cornerstoneRenderData.element,{x:n,y:o}=cornerstone.pageToPixel(t,e.pageX,e.pageY);this.props.onAdd([[n,o]],e)}},this.onPointEnter=e=>{"function"===typeof this.props.onFocus&&this.props.onFocus(e)},this.onPointLeave=()=>{"function"===typeof this.props.onFocus&&this.props.onFocus(null)},this.onPointRemove=e=>{"function"===typeof this.props.onRemove&&this.props.onRemove(e)}}render(){return r.a.createElement("svg",{role:"figure",width:this.props.width,height:this.props.height,className:this.props.className,style:{position:"absolute",top:0,left:0,width:this.props.width,height:this.props.height,userSelect:"none",pointerEvents:!0===this.props.interact?"auto":"none"},onClick:this.onPointAdd},this.props.cornerstoneRenderData&&this.props.contours&&this.props.contours.length>0&&this.props.contours.map(e=>{const{id:t,polygon:n,dataAttrs:o={},label:i}=e,a="function"===typeof this.props.pointPinFunction?this.props.pointPinFunction(e):this.props.pointPinComponent||s,c="function"===typeof i?i(e):"string"===typeof i?i:t.toString();return r.a.createElement(a,Object.assign({key:t},(u=this.props.cornerstoneRenderData.element,h=n[0],cornerstone.pixelToCanvas(u,{x:h[0],y:h[1]})),o,{"data-id":t,"data-focused":e===this.props.focusedContour||void 0,label:c,onEnter:()=>this.onPointEnter(e),onLeave:()=>this.onPointLeave(),onRemove:()=>this.onPointRemove(e)}));var u,h}))}}}}]);
//# sourceMappingURL=1.d0f80f94ef8e3ae7c6e0.js.map
(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{670:function(e,n,t){"use strict";t.r(n),n.default="import { ColorProperty } from 'csstype';\nimport { css } from 'styled-components';\n\nexport interface InsightViewerCSSProperties {\n  '--contour-viewer-color'?: ColorProperty;\n  '--contour-viewer-focused-color'?: ColorProperty;\n  '--contour-viewer-stroke-width'?: ColorProperty;\n  '--contour-viewer-focused-stroke-width'?: ColorProperty;\n  '--contour-viewer-fill-color'?: ColorProperty;\n  '--contour-viewer-focused-fill-color'?: ColorProperty;\n\n  '--contour-drawer-color'?: ColorProperty;\n  '--contour-drawer-stroke-width'?: ColorProperty;\n  '--contour-drawer-fill-color'?: ColorProperty;\n\n  '--pin-color'?: ColorProperty;\n  '--pin-focused-color'?: ColorProperty;\n}\n\nexport const blockStyle = css`\n  --contour-viewer-color: #ffffff;\n  --contour-viewer-focused-color: rgb(255, 194, 17);\n  --contour-viewer-stroke-width: 3px;\n  --contour-viewer-focused-stroke-width: 6px;\n  --contour-viewer-fill-color: rgba(0, 0, 0, 0.2);\n  --contour-viewer-focused-fill-color: rgba(0, 0, 0, 0.4);\n\n  --contour-drawer-color: rgb(255, 224, 0);\n  --contour-drawer-stroke-width: 4px;\n  --contour-drawer-fill-color: rgba(255, 224, 0, 0.2);\n\n  --pin-color: #ffffff;\n  --pin-focused-color: rgb(255, 194, 17);\n`;\n\nexport const globalStyle = css`\n  :root {\n    ${blockStyle};\n  }\n`;\n"},674:function(e,n,t){"use strict";function o(e){return`Annotation(${e.id})`}t.d(n,"b",(function(){return o})),t.d(n,"a",(function(){return r}));const r=[{polygon:[[340.48,232.95999999999998],[265.38666666666666,232.10666666666668]],label:o,dataAttrs:{"data-category":"normal"}},{polygon:[[173.2266666666667,381.44],[276.48,400.21333333333337]],label:o,dataAttrs:{"data-category":"abnormal"}},{polygon:[[419.84000000000003,448.85333333333335],[361.81333333333333,407.04]],label:o,dataAttrs:{"data-category":"normal"}},{polygon:[[174.93333333333334,88.74666666666668],[215.89333333333335,129.70666666666665]],label:o,dataAttrs:{"data-category":"abnormal"}}]},701:function(e,n,t){"use strict";t.r(n);var o=t(666),r=t(0),i=t.n(r),s=t(674);Object(o.installWADOImageLoader)();const a={width:[600,400,1e3],height:[700,400,1e3],control:["pan",["none","pan","adjust"]],wheel:["zoom",["none","zoom"]],flip:[!1],invert:[!1]};n.default=()=>{const e=Object(r.useMemo)(()=>new o.CornerstoneSingleImage("wadouri:https://fixtures.front.lunit.io/dcm-files/series/CT000010.dcm",{unload:o.unloadImage}),[]),{cornerstoneRenderData:n,updateCornerstoneRenderData:t}=Object(o.useInsightViewerSync)(),{contours:c,focusedContour:l,focusContour:u}=Object(o.useContour)({mode:"circle",initialContours:s.a});return i.a.createElement(o.InsightViewerTestController,{options:a},({width:r,height:s,invert:a,flip:d,control:p,wheel:h,resetTime:m,element:w,setElement:f,interactions:g})=>i.a.createElement(o.InsightViewerContainer,{ref:f,width:r,height:s},i.a.createElement(o.CornerstoneViewer,{width:r,height:s,invert:a,flip:d,interactions:g,resetTime:m,image:e,updateCornerstoneRenderData:t}),c&&c.length>0&&n&&i.a.createElement(i.a.Fragment,null,i.a.createElement(o.CircleViewer,{width:r,height:s,contours:c,focusedContour:l,cornerstoneRenderData:n}),i.a.createElement(o.CircleHover,{hover:w,width:r,height:s,contours:c,onFocus:u,cornerstoneRenderData:n}))))}},702:function(e,n,t){"use strict";t.r(n),n.default="import {\n  CircleHover,\n  CircleViewer,\n  CornerstoneImage,\n  CornerstoneSingleImage,\n  CornerstoneViewer,\n  InsightViewerContainer,\n  InsightViewerControllerOptions,\n  InsightViewerTestController,\n  installWADOImageLoader,\n  unloadImage,\n  useContour,\n  useInsightViewerSync,\n} from '@lunit/insight-viewer';\nimport React, { useMemo } from 'react';\nimport { initialContours } from '../../../__fixtures__/circle';\n\ninstallWADOImageLoader();\n\nconst controllerOptions: InsightViewerControllerOptions = {\n  width: [600, 400, 1000],\n  height: [700, 400, 1000],\n  control: ['pan', ['none', 'pan', 'adjust']],\n  wheel: ['zoom', ['none', 'zoom']],\n  flip: [false],\n  invert: [false],\n};\n\nexport default () => {\n  const image: CornerstoneImage = useMemo(\n    () =>\n      new CornerstoneSingleImage(`wadouri:https://fixtures.front.lunit.io/dcm-files/series/CT000010.dcm`, {\n        unload: unloadImage,\n      }),\n    [],\n  );\n\n  const { cornerstoneRenderData, updateCornerstoneRenderData } = useInsightViewerSync();\n\n  // create contour data\n  const { contours, focusedContour, focusContour } = useContour({\n    mode: 'circle',\n    initialContours,\n  });\n\n  return (\n    <InsightViewerTestController options={controllerOptions}>\n      {({ width, height, invert, flip, control, wheel, resetTime, element, setElement, interactions }) => (\n        <InsightViewerContainer ref={setElement} width={width} height={height}>\n          <CornerstoneViewer\n            width={width}\n            height={height}\n            invert={invert}\n            flip={flip}\n            interactions={interactions}\n            resetTime={resetTime}\n            image={image}\n            updateCornerstoneRenderData={updateCornerstoneRenderData}\n          />\n          {contours && contours.length > 0 && cornerstoneRenderData && (\n            <>\n              <CircleViewer\n                width={width}\n                height={height}\n                contours={contours}\n                focusedContour={focusedContour}\n                cornerstoneRenderData={cornerstoneRenderData}\n              />\n              <CircleHover\n                hover={element}\n                width={width}\n                height={height}\n                contours={contours}\n                onFocus={focusContour}\n                cornerstoneRenderData={cornerstoneRenderData}\n              />\n            </>\n          )}\n        </InsightViewerContainer>\n      )}\n    </InsightViewerTestController>\n  );\n};\n"},829:function(e,n,t){"use strict";t.r(n),n.default="import React, { Component, createRef, CSSProperties, Fragment, RefObject } from 'react';\nimport styled from 'styled-components';\nimport { InsightViewerGuestProps } from '../hooks/useInsightViewerSync';\nimport { Contour, Point } from '../types';\n\nexport interface CircleViewerProps<T extends Contour> extends InsightViewerGuestProps {\n  width: number;\n  height: number;\n\n  /** Contour \ub370\uc774\ud130\ub97c \uc0c1\uc18d\ubc1b\uc740 Annotation \ub370\uc774\ud130 */\n  contours: T[];\n\n  /** Mouse Over \ub4f1 User Interaction\uc5d0 \uc758\ud574\uc11c Focus \ub41c Contour */\n  focusedContour: T | null;\n\n  /** <svg className={}> */\n  className?: string;\n\n  /** <svg style={}> */\n  style?: CSSProperties;\n\n  /**\n   * Line\uc5d0 \uc678\uacfd\uc744 \uadf8\ub824\uc900\ub2e4\n   * Line\uc744 \ub450 \uac1c \uadf8\ub824\uc11c border\ub97c \ud45c\ud604\ud558\uae30 \ub54c\ubb38\uc5d0,\uc131\ub2a5\uc5d0 \ubbfc\uac10\ud55c \uc0c1\ud669\uc778 \uacbd\uc6b0 \ube44\ud65c\uc131 \uc2dc\ud0ac \uc218 \uc788\ub2e4.\n   */\n  border?: boolean;\n}\n\nfunction toLocal(element: HTMLElement, polygon: Point[]): { cx: number; cy: number; r: number } {\n  const { x: x1, y: y1 } = cornerstone.pixelToCanvas(element, { x: polygon[0][0], y: polygon[0][1] });\n  const { x: x2, y: y2 } = cornerstone.pixelToCanvas(element, { x: polygon[1][0], y: polygon[1][1] });\n  const r: number = Math.sqrt(Math.pow(Math.abs(x2 - x1), 2) + Math.pow(Math.abs(y2 - y1), 2));\n\n  return {\n    cx: x1,\n    cy: y1,\n    r,\n  };\n}\n\nexport class CircleViewerBase<T extends Contour> extends Component<CircleViewerProps<T>, {}> {\n  static defaultProps: Pick<CircleViewerProps<Contour>, 'border'> = {\n    border: true,\n  };\n\n  private svgRef: RefObject<SVGSVGElement> = createRef();\n\n  render() {\n    const { cornerstoneRenderData, contours, focusedContour } = this.props;\n\n    return (\n      <svg\n        ref={this.svgRef}\n        className={this.props.className}\n        style={this.props.style}\n        width={this.props.width}\n        height={this.props.height}\n      >\n        {contours.length > 0 &&\n          cornerstoneRenderData &&\n          cornerstoneRenderData.element &&\n          contours.map(contour => {\n            const { cx, cy, r } = toLocal(cornerstoneRenderData.element, contour.polygon);\n            const focused: boolean = contour === focusedContour;\n            const dataAttrs: { [attr: string]: string } = contour.dataAttrs || {};\n\n            return (\n              <Fragment key={'circle' + contour.id}>\n                {this.props.border === true && (\n                  <circle\n                    {...dataAttrs}\n                    data-border=\"border\"\n                    data-id={contour.id}\n                    data-focused={focused || undefined}\n                    cx={cx}\n                    cy={cy}\n                    r={r}\n                  />\n                )}\n                <circle {...dataAttrs} data-id={contour.id} data-focused={focused || undefined} cx={cx} cy={cy} r={r} />\n                {this.props.border === true && (\n                  <text\n                    {...dataAttrs}\n                    data-border=\"border\"\n                    data-id={contour.id}\n                    data-focused={focused || undefined}\n                    fontSize={14 * Math.max(1, cornerstoneRenderData.viewport.scale)}\n                    x={cx}\n                    y={cy}\n                  >\n                    {contour.label\n                      ? typeof contour.label === 'function'\n                        ? contour.label(contour)\n                        : contour.label\n                      : contour.id}\n                  </text>\n                )}\n                <text\n                  {...dataAttrs}\n                  data-id={contour.id}\n                  data-focused={focused || undefined}\n                  fontSize={14 * Math.max(1, cornerstoneRenderData.viewport.scale)}\n                  x={cx}\n                  y={cy}\n                >\n                  {contour.label\n                    ? typeof contour.label === 'function'\n                      ? contour.label(contour)\n                      : contour.label\n                    : contour.id}\n                </text>\n              </Fragment>\n            );\n          })}\n      </svg>\n    );\n  }\n}\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\nexport const CircleViewer: new <T extends Contour>() => CircleViewerBase<T> = styled(CircleViewerBase)`\n  position: absolute;\n  top: 0;\n  left: 0;\n  pointer-events: none;\n  user-select: none;\n\n  --color: #ffffff;\n  --focused-color: rgb(255, 194, 17);\n  --stroke-width: 3px;\n  --focused-stroke-width: 6px;\n  --fill-color: rgba(0, 0, 0, 0.2);\n  --focused-fill-color: rgba(0, 0, 0, 0.4);\n\n  > circle {\n    stroke-width: var(--contour-viewer-stroke-width, var(--stroke-width));\n    stroke: var(--contour-viewer-color, var(--color));\n    fill: var(--contour-viewer-fill-color, var(--fill-color));\n    transition: stroke 120ms ease-out, stroke-width 120ms ease-out;\n\n    &[data-focused] {\n      stroke-width: var(--contour-viewer-focused-stroke-width, var(--focused-stroke-width));\n      stroke: var(--contour-viewer-focused-color, var(--focused-color));\n      fill: var(--contour-viewer-focused-fill-color, var(--focused-fill-color));\n    }\n\n    &[data-border] {\n      stroke-width: calc(var(--contour-viewer-stroke-width, var(--stroke-width)) + 2px);\n      stroke: #000000;\n      fill: transparent;\n\n      &[data-focused] {\n        stroke-width: calc(var(--contour-viewer-focused-stroke-width, var(--focused-stroke-width)) + 2px);\n        stroke: #000000;\n      }\n    }\n  }\n\n  > text {\n    fill: var(--contour-viewer-color, var(--color));\n    font-family: proximanova, noto_sans, sans-serif;\n    font-weight: 600;\n    text-anchor: middle;\n    dominant-baseline: central;\n    transition: fill 120ms ease-out, stroke-width 120ms ease-out;\n\n    &[data-focused] {\n      fill: var(--contour-viewer-focused-color, var(--focused-color));\n    }\n\n    &[data-border] {\n      stroke-width: 4px;\n      stroke: #000000;\n      fill: transparent;\n    }\n  }\n` as any;\n\n/**\n * @deprecated use CircleViewer instead\n */\nexport const UserCircleViewer = CircleViewer;\n"},830:function(e,n,t){"use strict";t.r(n),n.default="import { Contour } from '@lunit/insight-viewer';\n\nexport function labelFunction(contour: Contour): string {\n  return `Annotation(${contour.id})`;\n}\n\nexport const initialContours: Omit<Contour, 'id'>[] = [\n  {\n    polygon: [\n      [340.48, 232.95999999999998],\n      [265.38666666666666, 232.10666666666668],\n    ],\n    label: labelFunction,\n    dataAttrs: {\n      'data-category': 'normal',\n    },\n  },\n  {\n    polygon: [\n      [173.2266666666667, 381.44],\n      [276.48, 400.21333333333337],\n    ],\n    label: labelFunction,\n    dataAttrs: {\n      'data-category': 'abnormal',\n    },\n  },\n  {\n    polygon: [\n      [419.84000000000003, 448.85333333333335],\n      [361.81333333333333, 407.04],\n    ],\n    label: labelFunction,\n    dataAttrs: {\n      'data-category': 'normal',\n    },\n  },\n  {\n    polygon: [\n      [174.93333333333334, 88.74666666666668],\n      [215.89333333333335, 129.70666666666665],\n    ],\n    label: labelFunction,\n    dataAttrs: {\n      'data-category': 'abnormal',\n    },\n  },\n];\n"},831:function(e,n,t){"use strict";t.r(n);var o=t(666),r=t(0),i=t.n(r),s=t(36),a=t(674);Object(o.installWADOImageLoader)();const c={width:[600,400,1e3],height:[700,400,1e3],control:["pan",["none","pan","adjust"]],wheel:["zoom",["none","zoom"]],flip:[!1],invert:[!1]},l=Object(s.d)(o.CircleViewer)`
  --contour-viewer-stroke-width: 10px;
  --contour-viewer-focused-stroke-width: 20px;

  --contour-viewer-color: blue;
  --contour-viewer-focused-color: red;
  --contour-viewer-fill-color: rgba(0, 0, 255, 0.3);
  --contour-viewer-focused-fill-color: rgba(255, 0, 0, 0.3);
`;n.default=()=>{const e=Object(r.useMemo)(()=>new o.CornerstoneSingleImage("wadouri:https://fixtures.front.lunit.io/dcm-files/series/CT000010.dcm",{unload:o.unloadImage}),[]),{cornerstoneRenderData:n,updateCornerstoneRenderData:t}=Object(o.useInsightViewerSync)(),{contours:s,focusedContour:u,focusContour:d}=Object(o.useContour)({mode:"circle",initialContours:a.a});return i.a.createElement(o.InsightViewerTestController,{options:c},({width:r,height:a,invert:c,flip:p,control:h,wheel:m,resetTime:w,interactions:f,element:g,setElement:C})=>i.a.createElement(o.InsightViewerContainer,{ref:C,width:r,height:a},i.a.createElement(o.CornerstoneViewer,{width:r,height:a,invert:c,flip:p,interactions:f,resetTime:w,image:e,updateCornerstoneRenderData:t}),s&&s.length>0&&n&&i.a.createElement(i.a.Fragment,null,i.a.createElement(l,{width:r,height:a,contours:s,focusedContour:u,cornerstoneRenderData:n}),i.a.createElement(o.CircleHover,{hover:g,width:r,height:a,contours:s,onFocus:d,cornerstoneRenderData:n}))))}},832:function(e,n,t){"use strict";t.r(n),n.default="import {\n  CircleHover,\n  CircleViewer,\n  CornerstoneImage,\n  CornerstoneSingleImage,\n  CornerstoneViewer,\n  InsightViewerContainer,\n  InsightViewerControllerOptions,\n  InsightViewerTestController,\n  installWADOImageLoader,\n  unloadImage,\n  useContour,\n  useInsightViewerSync,\n} from '@lunit/insight-viewer';\nimport React, { useMemo } from 'react';\nimport styled from 'styled-components';\nimport { initialContours } from '../../../__fixtures__/circle';\n\ninstallWADOImageLoader();\n\nconst controllerOptions: InsightViewerControllerOptions = {\n  width: [600, 400, 1000],\n  height: [700, 400, 1000],\n  control: ['pan', ['none', 'pan', 'adjust']],\n  wheel: ['zoom', ['none', 'zoom']],\n  flip: [false],\n  invert: [false],\n};\n\nconst CustomStyleViewer = styled(CircleViewer)`\n  --contour-viewer-stroke-width: 10px;\n  --contour-viewer-focused-stroke-width: 20px;\n\n  --contour-viewer-color: blue;\n  --contour-viewer-focused-color: red;\n  --contour-viewer-fill-color: rgba(0, 0, 255, 0.3);\n  --contour-viewer-focused-fill-color: rgba(255, 0, 0, 0.3);\n`;\n\nexport default () => {\n  const image: CornerstoneImage = useMemo(\n    () =>\n      new CornerstoneSingleImage(`wadouri:https://fixtures.front.lunit.io/dcm-files/series/CT000010.dcm`, {\n        unload: unloadImage,\n      }),\n    [],\n  );\n\n  const { cornerstoneRenderData, updateCornerstoneRenderData } = useInsightViewerSync();\n\n  // create contour data\n  const { contours, focusedContour, focusContour } = useContour({\n    mode: 'circle',\n    initialContours,\n  });\n\n  return (\n    <InsightViewerTestController options={controllerOptions}>\n      {({ width, height, invert, flip, control, wheel, resetTime, interactions, element, setElement }) => (\n        <InsightViewerContainer ref={setElement} width={width} height={height}>\n          <CornerstoneViewer\n            width={width}\n            height={height}\n            invert={invert}\n            flip={flip}\n            interactions={interactions}\n            resetTime={resetTime}\n            image={image}\n            updateCornerstoneRenderData={updateCornerstoneRenderData}\n          />\n          {contours && contours.length > 0 && cornerstoneRenderData && (\n            <>\n              <CustomStyleViewer\n                width={width}\n                height={height}\n                contours={contours}\n                focusedContour={focusedContour}\n                cornerstoneRenderData={cornerstoneRenderData}\n              />\n              <CircleHover\n                hover={element}\n                width={width}\n                height={height}\n                contours={contours}\n                onFocus={focusContour}\n                cornerstoneRenderData={cornerstoneRenderData}\n              />\n            </>\n          )}\n        </InsightViewerContainer>\n      )}\n    </InsightViewerTestController>\n  );\n};\n"},935:function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return l}));t(0);var o=t(62),r=t(63),i=t(7),s=t(89),a=t(667);const c={};function l({components:e,...n}){return Object(o.b)("wrapper",Object.assign({},c,n,{components:e,mdxType:"MDXLayout"}),Object(o.b)("h1",null,Object(o.b)("inlineCode",{parentName:"h1"},"<CircleViewer>")),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"<ContourViewer>"),"\uc640 \ub9c8\ucc2c\uac00\uc9c0\ub85c ",Object(o.b)("inlineCode",{parentName:"p"},"Contour")," \ub370\uc774\ud130\ub97c \ud654\uba74\uc5d0 \uadf8\ub9b0\ub2e4."),Object(o.b)(r.b,{to:"/insight-viewer/contour",mdxType:"Link"},"`Contour` \ub370\uc774\ud130\ub97c `Circle` Type\uc73c\ub85c \uc0ac\uc6a9\ud55c\ub2e4."),Object(o.b)("h1",null,"API"),Object(o.b)(s.Example,{example:Object(i.d)("@lunit/insight-viewer/components/CircleViewer",{source:t(829),filename:"src/_packages/@lunit/insight-viewer/components/CircleViewer.tsx"}),api:!0,mdxType:"Example"}),Object(o.b)("h1",null,"Sample"),Object(o.b)("p",null,"\uc544\ub798 \ubaa8\ub4e0 \uc608\uc81c\ub4e4\uc740 \uc774 Data\ub97c \uc0ac\uc6a9\ud558\uac8c \ub41c\ub2e4."),Object(o.b)(s.Example,{example:Object(i.d)("../../__fixtures__/circle",{source:t(830),filename:"src/_packages/@lunit/insight-viewer/__fixtures__/circle.ts"}),mdxType:"Example"}),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"Contour")," \ub370\uc774\ud130\ub97c \ub123\uc5b4\uc8fc\uba74 \ud654\uba74\uc5d0 Annotation\uc744 \uadf8\ub9b0\ub2e4."),Object(o.b)(s.Example,{example:Object(i.b)("./CircleViewer/Basic",{component:t(701),source:t(702),filename:"src/_packages/@lunit/insight-viewer/__pages__/Components/CircleViewer/Basic.tsx"}),mdxType:"Example"},Object(o.b)(a.a,{height:720,mdxType:"InsightViewerPreview"})),Object(o.b)("h1",null,"Styling"),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"<ContourViewer>"),"\uc640 \ub9c8\ucc2c\uac00\uc9c0\ub85c CSS Variable\uc744 \ud1b5\ud574\uc11c \uc0c9\uc0c1\uc744 \ubcc0\uacbd\ud560 \uc218 \uc788\ub2e4."),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"<ContourViewer>"),"\uc640 \uac19\uc740 ",Object(o.b)("inlineCode",{parentName:"p"},"--contour-viewer-*"),"\uc758 \uc774\ub984\uc744 \uac00\uc9c4 \ud56d\ubaa9\ub4e4\uc5d0 \uc601\ud5a5\uc744 \ubc1b\ub294\ub2e4."),Object(o.b)(s.Example,{example:Object(i.d)("../../theme/style",{source:t(670),filename:"src/_packages/@lunit/insight-viewer/theme/style.ts"}),mdxType:"Example"}),Object(o.b)(s.Example,{example:Object(i.b)("./CircleViewer/CustomStyle",{component:t(831),source:t(832),filename:"src/_packages/@lunit/insight-viewer/__pages__/Components/CircleViewer/CustomStyle.tsx"}),mdxType:"Example"},Object(o.b)(a.a,{height:720,mdxType:"InsightViewerPreview"})),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"Contour.dataAttrs"),"\ub098 \ubc30\uc5f4 \uc21c\uc11c\uc5d0 \ub530\ub978 Styling\uc740 ",Object(o.b)("inlineCode",{parentName:"p"},"<ContourViewer>"),"\uc640 \ub3d9\uc77c\ud558\ub2e4. "))}l.isMDXComponent=!0}}]);
//# sourceMappingURL=10.45b5470106c6da231db7.js.map
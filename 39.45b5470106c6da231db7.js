(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{888:function(n,e,t){"use strict";t.r(e),e.default="import { Component, useEffect, useState } from 'react';\n\n/** window.open() \uc0c8 \ucc3d\uc758 width, height */\nexport interface WindowFeatures {\n  width: number;\n  height: number;\n}\n\nexport interface NewWindowProps<T> {\n  /** Window\uc758 URL */\n  url: string;\n\n  /** Window\ub85c \uc804\ub2ec\ud560 Data */\n  value: T;\n\n  /** window.open() \uc758 3\ubc88\uc9f8 \uc778\uc790\ub85c \uc804\ub2ec\ub418\ub294 features */\n  features: WindowFeatures | string;\n\n  /** Window\uac00 \uc5f4\ub838\uc744\ub54c */\n  onOpen?: (window: Window) => void;\n\n  /** Window\uac00 \ub2eb\ud614\uc744\ub54c */\n  onClose?: () => void;\n\n  /** Window\ub97c \uc5f4\ub824\uace0 \ud588\uc9c0\ub9cc, Browser Pop-up \uc81c\ud55c\uc5d0 \ub9c9\ud614\uc744\ub54c */\n  onBlock?: () => void;\n}\n\nconst VALUE: string = '__window_value__';\nconst UPDATE: string = '__window_value_update__';\n\n/**\n * Window\ub97c \uc5f0\ub2e4\n */\nexport class NewWindow<T> extends Component<NewWindowProps<T>, {}> {\n  private windowObject!: Window;\n  private intervalId!: number;\n\n  render() {\n    return null;\n  }\n\n  close = () => {\n    const { onClose } = this.props;\n\n    if (typeof onClose === 'function') {\n      onClose();\n    }\n\n    clearInterval(this.intervalId);\n    this.windowObject.removeEventListener('close', this.close);\n    window.removeEventListener('beforeunload', this.close);\n\n    if (!this.windowObject.closed) {\n      this.windowObject.close();\n    }\n  };\n\n  componentDidMount() {\n    const { url, value, features, onOpen, onBlock } = this.props;\n\n    const windowObject: Window | null = window.open(\n      url,\n      '_blank',\n      typeof features === 'string' ? features : `width=${features.width}, height=${features.height}`,\n    );\n\n    if (windowObject) {\n      if (typeof onOpen === 'function') {\n        onOpen(windowObject);\n      }\n      this.windowObject = windowObject;\n      windowObject[VALUE] = value;\n      windowObject.addEventListener('close', this.close);\n      window.addEventListener('beforeunload', this.close);\n      this.intervalId = setInterval(() => {\n        if (this.windowObject.closed) {\n          this.close();\n        }\n      }, 100);\n    } else {\n      if (typeof onBlock === 'function') {\n        onBlock();\n      }\n    }\n  }\n\n  componentDidUpdate(prevProps: Readonly<NewWindowProps<T>>) {\n    const { url, value } = this.props;\n\n    if (prevProps.url !== url) {\n      this.windowObject.history.pushState({}, '', url);\n    }\n\n    if (prevProps.value !== value) {\n      this.windowObject[VALUE] = value;\n      this.windowObject.dispatchEvent(new Event(UPDATE));\n    }\n  }\n\n  componentWillUnmount() {\n    this.close();\n  }\n}\n\n/**\n * Window\uc5d0\uc11c <NewWindow value={}/> \ub85c \ub123\uc5b4\uc9c4 Data\ub97c \ubc1b\ub294\ub2e4\n */\nexport function useWindowValue<T>(): T | undefined {\n  const [value, setValue] = useState<T | undefined>(() => {\n    return window[VALUE];\n  });\n\n  useEffect(() => {\n    function callback() {\n      setValue(window[VALUE]);\n    }\n\n    window.addEventListener(UPDATE, callback);\n\n    return () => {\n      window.removeEventListener(UPDATE, callback);\n    };\n  }, []);\n\n  return value;\n}\n"},889:function(n,e,t){"use strict";t.r(e),e.default="import { NewWindow } from '@lunit/new-window';\nimport { Button, TextField } from '@material-ui/core';\nimport React, { useState } from 'react';\n\nexport function MainContent() {\n  // window open\n  const [open, setOpen] = useState<boolean>(false);\n\n  // values\n  const [a, setA] = useState<number>(1);\n  const [b, setB] = useState<number>(2);\n\n  return (\n    <div>\n      <div>\n        <TextField value={a} onChange={({ target }) => setA(+target.value)} /> +{' '}\n        <TextField value={b} onChange={({ target }) => setB(+target.value)} /> = <span>{a + b}</span>\n      </div>\n\n      {open ? (\n        <>\n          <div style={{ marginTop: 20 }}>\n            {/* Window\ub97c \ub2eb\ub294\ub2e4 */}\n            <Button variant=\"contained\" color=\"primary\" onClick={() => setOpen(false)}>\n              Close Window\n            </Button>\n          </div>\n\n          {/* Window */}\n          <NewWindow\n            url=\"/window\"\n            value={{\n              a,\n              b,\n              updateA: setA,\n              updateB: setB,\n            }}\n            features={{ width: 500, height: 400 }}\n            onOpen={(popupWindow: Window) => console.log(popupWindow)}\n            onClose={() => setOpen(false)}\n            onBlock={() => {\n              alert('Browser Pop-up \uc81c\ud55c\uc744 \ud574\uc81c\ud574\uc8fc\uc138\uc694.');\n              setOpen(false);\n            }}\n          />\n        </>\n      ) : (\n        <div style={{ marginTop: 20 }}>\n          {/* Window\ub97c \uc5f0\ub2e4 */}\n          <Button variant=\"contained\" color=\"primary\" onClick={() => setOpen(true)}>\n            Open Window\n          </Button>\n        </div>\n      )}\n    </div>\n  );\n}\n"},890:function(n,e,t){"use strict";t.r(e),e.default="import { useWindowValue } from '@lunit/new-window';\nimport { Button, TextField } from '@material-ui/core';\nimport React from 'react';\nimport { WindowValue } from '../model/window-value';\n\nexport function WindowContent() {\n  // <NewWindow value={}> \uc5d0\uc11c \uc804\ub2ec\ud55c \uac12\ub4e4\uc744 \ubc1b\ub294\ub2e4\n  const value: WindowValue | undefined = useWindowValue<WindowValue>();\n\n  return value ? (\n    <div>\n      <div>\n        <TextField value={value.a} onChange={({ target }) => value.updateA(+target.value)} /> +{' '}\n        <TextField value={value.b} onChange={({ target }) => value.updateB(+target.value)} /> ={' '}\n        <span>{value.a + value.b}</span>\n      </div>\n\n      <div style={{ marginTop: 20 }}>\n        {/* Window\ub97c \ub2eb\ub294\ub2e4 */}\n        <Button variant=\"contained\" color=\"primary\" onClick={() => window.close()}>\n          Close Window\n        </Button>\n      </div>\n    </div>\n  ) : null;\n}\n"},952:function(n,e,t){"use strict";t.r(e),t.d(e,"default",(function(){return l}));t(0);var o=t(62),i=t(7),a=t(89);t(667);const d={};function l({components:n,...e}){return Object(o.b)("wrapper",Object.assign({},d,e,{components:n,mdxType:"MDXLayout"}),Object(o.b)("h1",null,Object(o.b)("inlineCode",{parentName:"h1"},"@lunit/new-window")),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"window.open()"),"\uc744 \ub300\uccb4\ud558\ub294 \uc6a9\ub3c4\ub85c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub2e4."),Object(o.b)("p",null,"Main Window\uc640 Popup Window\uc758 Data\uac00 React Hook\uc73c\ub85c \uc5f0\uacb0\ub418\uae30 \ub54c\ubb38\uc5d0,",Object(o.b)("br",{parentName:"p"}),"\n","Main Window\ub97c \ubcf4\uc870\ud558\ub294 Popup\uc744 \ub9cc\ub4dc\ub294 \uc6a9\ub3c4\ub85c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub2e4."),Object(o.b)("blockquote",null,Object(o.b)("p",{parentName:"blockquote"},Object(o.b)("inlineCode",{parentName:"p"},"window.open()")," \uc73c\ub85c Window\ub97c \uc5f0 \ub2e4\uc74c ",Object(o.b)("inlineCode",{parentName:"p"},"createPortal()"),"\uc744 \uc0ac\uc6a9\ud574\uc11c \uc81c\uc5b4\ud558\ub294 \ubc29\ubc95\ub3c4 \uc788\uc9c0\ub9cc,",Object(o.b)("br",{parentName:"p"}),"\n","\uc591\uce21\uc758 ",Object(o.b)("inlineCode",{parentName:"p"},"window")," \uac1d\uccb4\uac00 \ub2e4\ub974\ub2e4\ub294 \uac83\uc5d0 \uc758\ud574 \uc5ec\ub7ec\uac00\uc9c0 \ubb38\uc81c\ub4e4\uc774 \ubc1c\uc0dd\ud558\uac8c \ub41c\ub2e4.",Object(o.b)("br",{parentName:"p"}),"\n","\uc591\uce21\uc744 \ubd84\ub9ac\ub41c \ubcc4\uac1c\uc758 Window\ub85c \uad6c\uc131\ud558\uace0, \ub2e8\uc21c\ud788 Data\ub85c\ub9cc \uc5f0\uacb0\ud558\ub294 \uac83\uc774 \ub354 \uc548\uc815\uc801\uc778 \ubc29\ubc95\uc774\uc5c8\ub2e4.")),Object(o.b)("h1",null,"API"),Object(o.b)(a.Example,{example:Object(i.d)("@lunit/new-window/index",{source:t(888),filename:"src/_packages/@lunit/new-window/index.tsx"}),api:!0,mdxType:"Example"}),Object(o.b)("h1",null,"Usage"),Object(o.b)("p",null,Object(o.b)("a",Object.assign({parentName:"p"},{href:"https://dist-handbook-new-window-sample.d2vum99qvuarsy.amplifyapp.com/"}),"Sample Site")),Object(o.b)("p",null,"\uc544\ub798\uc640 \uac19\uc774 Main Window\uc5d0\uc11c ",Object(o.b)("inlineCode",{parentName:"p"},"<NewWindow>"),"\ub97c \uc0ac\uc6a9\ud574\uc11c Window\ub97c \uc5f4 \uc218 \uc788\ub2e4."),Object(o.b)(a.Example,{example:Object(i.d)("../../../../handbook-new-window-sample/components/MainContent",{source:t(889),filename:"src/handbook-new-window-sample/components/MainContent.tsx"}),mdxType:"Example"}),Object(o.b)("p",null,"\uc5f4\ub824\uc9c4 Window\uc5d0\uc11c\ub294 ",Object(o.b)("inlineCode",{parentName:"p"},"useWindowValue()"),"\ub97c \uc0ac\uc6a9\ud574\uc11c Main Window\uc5d0\uc11c \uc804\ub2ec\ud55c Data\ub97c \ubc1b\uc744 \uc218 \uc788\ub2e4."),Object(o.b)(a.Example,{example:Object(i.d)("../../../../handbook-new-window-sample/components/WindowContent",{source:t(890),filename:"src/handbook-new-window-sample/components/WindowContent.tsx"}),mdxType:"Example"}))}l.isMDXComponent=!0}}]);
//# sourceMappingURL=39.45b5470106c6da231db7.js.map